{
  "postgre": {
    "general": {
      "METADATAMASTER": "select structtype,structname,structcaption,structstatus,createdon,updatedby,updatedon,ordno\r\nfrom \r\n( SELECT structtype,structname,structcaption,structstatus,createdon,updatedby,updatedon,\r\nROW_NUMBER() OVER (ORDER BY updatedon desc ) AS ordno\r\nFROM \r\nAxmMetaDataMaster\r\nwhere updatedby =@username and (@structtype = '' OR structtype = @structtype) and structname <> 'axglo' \r\nORDER BY updatedon desc ) a\r\nunion all \r\nSELECT structtype,structname,structcaption,structstatus,createdon,updatedby,updatedon,\r\nROW_NUMBER() OVER (ORDER BY updatedon desc ) AS ordno\r\nFROM \r\nAxmMetaDataMaster\r\nwhere updatedby not in   ( select username from axusers where username =@username) and (@structtype = '' OR structtype = @structtype) AND structname <> 'axglo' \r\nORDER BY updatedon desc \r\n",
      "INSERT_METADATAMASTER": "insert into AxmMetaDataMaster (structType,structName,structCaption,structstatus,createdby,updatedby) values(@structType,@structName,@structCaption,@structstatus,@createdby,@updatedby)",
      "UPDATE_METADATAMASTER": "update AxmMetaDataMaster set structName = @structName,structCaption = @structCaption,updatedon = CURRENT_DATE,updatedby = @updatedby where structType = @structType and structName = @structName",
      "UPDATE_STATUS_METADATAMASTER": "update AxmMetaDataMaster set structstatus = 'ready' where structType = @structType and structName = @structName",
      "DELETE_METADATAMASTER": "delete from AxmMetaDataMaster where structname = @structname and structtype = @structtype",
      "CHECKDUPTSTRUCT": "select case when exists (select 1 from AxmMetaDataMaster  where structName = :structname and structType = :structtype) then 1 else 0 end as c from dual",
      "GET_TBL_ClMN_HINT": "SELECT table_name,column_name\r\nFROM information_schema.columns\r\nWHERE table_schema = @schema\r\nORDER BY table_name",
      "GET_TST_CAPTION": "select caption from tstructs where name = @structname",
      "GET_TST_Fld_CAPTION": "SELECT \r\nCAST(\r\nCASE \r\nWHEN COALESCE(caption, '') = '' THEN fname \r\nELSE RTRIM(caption, '*') \r\nEND AS VARCHAR(250)\r\n) AS caption \r\nFROM axpflds \r\nWHERE tstruct = @structname \r\nAND fname = @fldname",
      "GET_DC_CAPTION": "select caption from axpdc where tstruct =  @structname and dname = @dcname",
      "GET_DCISGRID": "select asgrid from axpdc  tstruct =  @structname and dname = @dcname",
      "GET_IVIEW_CAPTION": "select caption from iviews where name = @structname",
      "GET_PAGE_CAPTION": "select caption from axpages where name = @structname",
      "API_MO_INFO_BY_NAME": "select execapidefname as name,execapidefname as caption,execapiurl as url,execapirequeststring as reqstr,apiresponsetype as resptype,apiresponseformat as respformat                                         from executeapidef where APICategory='Drop Down'' and execapidefname = @apiname",
      "GET_DCCAPTION_BY_TABLENAME": "select caption from axpdc where tstruct = @structname and tablename = @tablename",
      "GET_TST_FLD_CAPTION_N_SQLTEXT": "select  CAST( CASE  WHEN COALESCE(caption, '') = '' THEN fname  ELSE RTRIM(caption, '*')  END AS VARCHAR(250) ) AS caption, fldsql AS sqltext from axpflds where axpflds.tstruct = @structname and fname = @fldname"

    },

    "dropdown": {
      "USERLIST": "select username as name,username as caption  from axusers",
      "ROLESLIST": "select groupname  name,groupname  caption from AXUSERGROUPS ORDER BY groupname",
      "TSTLIST": "select cast( caption||'-('||name||')' as varchar(350)) as caption,name as name from tstructs order by caption",
      "TSTLIST_W_1STDC_TBLNAME": "select cast( t.caption||'-('||t.name||')' as varchar(350)) as caption,t.name as name,a.tablename from tstructs t ,axpdc a where t.name = a.tstruct and a.dname='dc1' order by caption",
      "TSTLIST_BUT_CURRENT": "select cast( caption || '-(' || name || ')' as varchar(350)) as caption,name as name from tstructs where name <> @structname order by caption",
      "FLDLIST_BY_FORM": "select cast(case when COALESCE(caption,'')='' then fname else case when allowempty='F' then left(caption,length(caption)-1) else caption end end ||'-('||fname||')' as varchar(250)) as caption,fname as name from axpflds where tstruct = @structname",
      "FLDLIST_BY_FORM_WITHOUT_CAP": "select fname as caption,fname as name from axpflds where tstruct = @structname",
      "FLDLIST_BY_FORM_N_DC": "select cast(case when COALESCE(caption,'')='' then fname else caption end ||'-('||fname||')' as varchar(250)) as caption, fname as name,dcname from axpflds  where tstruct = @structname and dcname = @dcname",
      "FLDLIST_W_DC_N_TBLNAME": "select distinct cast(case when COALESCE(axf.caption,'')='' then axf.fname\r\nelse axf.caption end ||'-('||axf.fname||')' as varchar(250)) as caption,\r\naxf.fname as name,axf.dcname,axd.tablename\r\nfrom axpflds axf join axpdc  axd on  axf.tstruct = axd.tstruct\r\nand axf.tablename = axd.tablename\r\nand axf.tstruct = @structname\r\norder by 3",
      "FILLGRID_SRCFLD": "SELECT cast(btrim(substring(substring(btrim(fname),'[^ ]*$'),'[^.]*$')) as varchar(30)) as fname from unnest(string_to_array( @fgcolumns , ','))\r\nWITH ORDINALITY As T(fname, ArrayOrder)\r\nunion\r\nselect i.NAME a from vw_field_informations i\r\nwhere i.TRANSID=@structname\r\nand i.DCNAME = @sourcedc",
      "APILISTSQL": "select execapidefname as name,execapidefname as caption,execapiurl as url,execapirequeststring as reqstr,apiresponsetype as resptype,apiresponseformat as respformat\r\n                                                    from executeapidef where APICategory='SQL' and APIResponseType='Axpert'",
      "APILISTMO": "select execapidefname as name,execapidefname as caption,execapiurl as url,execapirequeststring as reqstr,apiresponsetype as resptype,apiresponseformat as respformat\r\nfrom executeapidef where APICategory='Drop Down'",
      "APILIST_BTN": "select execapidefname from executeapidef where apicategory='Execute Script' order by 1",
      "FILLFROMAPISRC": "select cast(concat(caption,'-(',name,')') as varchar(500)) caption,name as fname from coretstructhdr a,executeapidef e\r\nwhere a.apidefname =e.executeapidefid\r\nand stransid= @stransid\r\nand modeofentry = 'Select From API'\r\nand e.apiresponsetype ='External'\r\norder by 1",
      "CUSTOMDATATYPES": "select cast(typename as varchar(20)) as typename from customtypes \r\nunion\r\nselect cast('NA' as varchar(20)) as typename",
      "HLINK_STRUCTLIST_BY_TYPE": "select cast(caption as varchar(100)) caption,name as name from \r\n(select caption||'('||name||')' caption, name\r\n    from tstructs where 'tstruct' = @type\r\nunion all\r\nselect caption||'('||name||')' caption, name from\r\n    iviews where 'iview' = @type\r\nunion all\r\nselect caption||'('||name||')' caption, name from\r\n    axpages where 'page' = @type)a\r\norder by 1",
      "HLINK_PARAMLIST_BY_STRUCTTYPE": "SELECT  cast(pname AS varchar(100)) name, cast(pname AS varchar(100)) caption FROM ( SELECT  pname      ,'1' dcname      ,ordno FROM iviewparams WHERE 'iview' =    @type AND iname =  @sname  UNION ALL SELECT fname      ,c2.dcname      ,c2.ordno FROM axpflds c2 WHERE 'tstruct' =    @type AND tstruct =  @sname UNION SELECT  concat(tablename,'ID')      ,dname      ,0 FROM axpdc d WHERE    @type IN ('tstruct', 'page') AND tstruct =  @sname UNION SELECT  a.fname      ,a.dcname      ,a.ordno FROM axpflds a, axpages b WHERE a.tstruct = substr(pagetype, 2) AND b.pagetype != 'web' AND 'page' =    @type AND b.name =  @sname  UNION ALL SELECT  unnest(string_to_array( a.params,','))      ,null      ,0 FROM htmlsections a, axpages b WHERE a.pageno = substring(b.name, 3) AND b.pagetype = 'web' AND 'page' =    @type AND a.pageno =  @sname  UNION ALL SELECT  regexp_split_to_table(db_function_params,E',')      ,null      ,0 FROM (  SELECT  substring(unnest(string_to_array( forms ,',')),position('-(' IN unnest(string_to_array( forms ,',')))+ 2,abs((position('-(' IN unnest(string_to_array( forms ,',')))+ 2) - length(substring(unnest(string_to_array( forms ,',')),1,length(unnest(string_to_array( forms ,','))))))) stransid       ,db_function_params  FROM axpdef_axvars  WHERE    @type = 'tstruct'  UNION ALL  SELECT  substring(unnest(string_to_array( reports ,',')),position('-(' IN unnest(string_to_array( reports ,',')))+ 2,abs((position('-(' IN unnest(string_to_array( reports ,',')))+ 2) - length(substring(unnest(string_to_array( reports ,',')),1,length(unnest(string_to_array( reports ,','))))))) stransid       ,db_function_params  FROM axpdef_axvars  WHERE    @type = 'iview'  ) a WHERE stransid =  @sname ) s",
      "TSTLIST_MASK": "select distinct cast(concat(b.caption,'-(',b.transid,')') as varchar(500))\r\n    frmcap,b.transid from axpflds a,tstructs b \r\nwhere a.tstruct = b.transid\r\nand coalesce(a.mask,'No Mask')!='No Mask'\r\norder by 1",
      "FLDLIST_MASKED": "select cast(concat(caption,'-(',fname,')') as varchar(500))\r\n    caption,fname as name from\r\n    axpflds\r\nwhere tstruct= @structname and \r\ncoalesce(mask,'No Mask')!='No Mask'\r\norder by 1",
      "CUSTOMDATATYPE_LIST": "select cast(typename as varchar(20)) name,cast(typename as varchar(20)) caption,datatype,width,dwidth from axp_customdatatype where isactive ='T' union all select cast('NA' as varchar(20)) as name ,cast('NA' as varchar(20)) as caption ,datatype ,width,deci  as dwidth from customtypes where typename = @customdatatype and  @customdatatype is not NULL",
      "ENCRIPTED_FORM_LIST": "select distinct cast(concat(b.caption,'-(',b.name,')') as varchar(500)) caption,b.name as name from axpflds a,tstructs b where  a.tstruct = b.name and coalesce(a.encrypted,'F')='T' order by 1",
      "ENCRIPTED_FIELD_LIST_BY_FORM": "select cast(concat(caption,'-(',fname,')') as varchar(500)) caption,fname as name from axpflds where tstruct= @structname and coalesce(encrypted,'F')='T' order by 1",
      "MASKED_FORM_LIST": "select distinct cast(concat(b.caption,'-(',b.name,')') as varchar(500)) caption,b.name as name from axpflds a,tstructs b where  a.tstruct = b.name and coalesce(a.masking,'No Mask')!='No Mask' order by 1 ",
      "MASKED_FIELD_LIST_BY_FORM": "select cast(concat(caption,'-(',fname,')') as varchar(500)) caption,fname as name,masking,maskchar,maskroles,firstcharmask,lastcharmask from axpflds where tstruct= @structname and coalesce(masking,'No Mask')!='No Mask' order by 1",
      "FIELDLIST_BY_FORM_UNION_TABLEIDS": "select concat(case when allowempty='F' then replace(caption,'*','') else caption end,'-(',fname,')') caption, fname name  from axpflds where tstruct=@structname  union all  select distinct concat(tablename,'id-(',tablename,'id)'),tablename||'id' from axpdc  where tstruct=@structname  order by 1"

    }

  },
  "oracle": {
    "general": {
      "METADATAMASTER": "select structtype,structname,structcaption,structstatus,createdon,updatedby,updatedon,ordno from  ( SELECT structtype,structname,structcaption,structstatus,createdon,updatedby,updatedon, ROW_NUMBER() OVER (ORDER BY updatedon desc ) AS ordno FROM  AxmMetaDataMaster where updatedby = :username and ( :structtype = '' OR structtype =  :structtype) and structname <> 'axglo' ORDER BY updatedon desc ) a union all  SELECT structtype,structname,structcaption,structstatus,createdon,updatedby,updatedon, ROW_NUMBER() OVER (ORDER BY updatedon desc ) AS ordno FROM  AxmMetaDataMaster where updatedby not in   ( select username from axusers where username = :username) and ( :structtype = '' OR structtype =  :structtype) and structname <> 'axglo' ORDER BY updatedon desc",
      "INSERT_METADATAMASTER": "insert into AxmMetaDataMaster (structType,structName,structCaption,structstatus,createdby,updatedby) values( :structType, :structName, :structCaption, :structstatus, :createdby, :updatedby)",
      "UPDATE_METADATAMASTER": "update AxmMetaDataMaster set structName = :structName,structCaption =  :structCaption,updatedon =sysdate,updatedby = :updatedby where structType =  :structType and structName =  :structName",
      "UPDATE_STATUS_METADATAMASTER": "update AxmMetaDataMaster set structstatus = 'ready' where structType =  :structType and structName =  :structName",
      "DELETE_METADATAMASTER": "delete from AxmMetaDataMaster where structname =  :structname and structtype =  :structtype",
      "CHECKDUPTSTRUCT": "select case when exists (select 1 from AxmMetaDataMaster  where structName = :structname and structType = :structtype) then 1 else 0 end as c from dual",
      "GET_TBL_ClMN_HINT": "select LOWER(table_name) AS table_name ,column_name from user_tab_columns order by table_name",
      "GET_TST_CAPTION": "select caption from tstructs where name = :structname",
      "GET_TST_Fld_CAPTION": "SELECT CAST(CASE WHEN COALESCE(caption, '') = '' THEN fname ELSE RTRIM(caption, '*') END AS VARCHAR(250)) AS caption FROM axpflds WHERE tstruct =  :structname AND fname =  :fldname",
      "GET_DC_CAPTION": "select caption from axpdc where tstruct =   :structname and dname =  :dcname",
      "GET_DCISGRID": "select asgrid from axpdc  tstruct =   :structname and dname =  :dcname",
      "GET_IVIEW_CAPTION": "select caption from iviews where name =  :structname",
      "GET_PAGE_CAPTION": "select caption from axpages where name =  :structname",
      "API_MO_INFO_BY_NAME": "select execapidefname as name,execapidefname as caption,execapiurl as url,execapirequeststring as reqstr,apiresponsetype as resptype,apiresponseformat as respformat                                         from executeapidef where APICategory='Drop Down' and execapidefname = :apiname",
      "GET_DCCAPTION_BY_TABLENAME": "select caption from axpdc where tstruct = :structname and tablename = :tablename",
      "GET_TST_FLD_CAPTION_N_SQLTEXT": "select  CAST(CASE WHEN COALESCE(caption, '') = '' THEN fname ELSE RTRIM(caption, '*') END AS VARCHAR(250)) AS caption, fldsql AS sqltext from axpflds where axpflds.tstruct = :structname and fname = :fldname"

    },

    "dropdown": {
      "USERLIST": "select username as name,username as caption  from axusers",
      "ROLESLIST": "select groupname  name,groupname  caption from AXUSERGROUPS ORDER BY groupname",
      "TSTLIST": "select cast( caption||'-('||name||')' as varchar(350)) as caption,name as name from tstructs order by caption",
      "TSTLIST_W_1STDC_TBLNAME": "select cast( t.caption||'-('||t.name||')' as varchar(350)) as caption,t.name as name,a.tablename from tstructs t ,axpdc a where t.name = a.tstruct and a.dname='dc1' order by caption",
      "TSTLIST_BUT_CURRENT": "select cast( caption || '-(' || name || ')' as varchar(350)) as caption,name as name from tstructs where name <>  :structname order by caption",
      "FLDLIST_BY_FORM": "SELECT cast(case when COALESCE(caption,'')='' then fname else case when allowempty='F' then substr(caption,1,length(caption)-1) else caption end end ||'-('||fname||')' as varchar(250)) as caption,fname as name from axpflds where tstruct = :structname",
      "FLDLIST_BY_FORM_WITHOUT_CAP": "select fname as caption,fname as name from axpflds where tstruct =  :structname",
      "FLDLIST_BY_FORM_N_DC": "select cast(case when COALESCE(caption,'')='' then fname else caption end ||'-('||fname||')' as varchar(250)) as caption, fname as name,dcname from axpflds where tstruct =  :structname and dcname =  :dcname",
      "FLDLIST_W_DC_N_TBLNAME": "select distinct cast(case when COALESCE(axf.caption,'')='' then axf.fname else axf.caption end ||'-('||axf.fname||')' as varchar(250)) as caption, axf.fname as name,axf.dcname,axd.tablename from axpflds axf join axpdc axd on axf.tstruct = axd.tstruct and axf.tablename = axd.tablename and axf.tstruct =  :structname order by 3",
      "FILLGRID_SRCFLD": "select fname from (select trim(regexp_substr(fgcolumns, '[^,]+', 1, level)) fname, level as arrayorder\r\n     from dual connect by regexp_substr(fgcolumns, '[^,]+', 1, level) is not null) u\r\nunion all\r\nselect i.NAME a from vw_field_informations i            \r\nwhere i.TRANSID= :structname            \r\nand i.DCNAME =  :sourcedc",
      "APILISTSQL": "select execapidefname as name,execapidefname as caption,execapiurl as url,execapirequeststring as reqstr,apiresponsetype as resptype,apiresponseformat as respformat                                            from executeapidef where APICategory='SQL' and APIResponseType='Axpert'",
      "APILISTMO": "select execapidefname as name,execapidefname as caption,execapiurl as url,execapirequeststring as reqstr,apiresponsetype as resptype,apiresponseformat as respformat                                         from executeapidef where APICategory='Drop Down'",
      "APILIST_BTN": "select execapidefname from executeapidef where apicategory='Execute Script' order by 1",
      "FILLFROMAPISRC": "select cast(caption ||'-('|| name ||')' as varchar(500)) caption,name as fname \r\nfrom coretstructhdr a,executeapidef e                                            \r\nwhere a.apidefname =e.executeapidefid                                            \r\nand stransid=  :stransid                                            \r\nand modeofentry = 'Select From API'                                            \r\nand e.apiresponsetype ='External'                                            \r\norder by 1\r\nunion                                        \r\nselect cast('NA' as varchar(20)) as typename from dual",
      "CUSTOMDATATYPES": "select cast(typename as varchar(20)) as typename from customtypes \r\nunion\r\nselect cast('NA' as varchar(20)) as typename",
      "HLINK_STRUCTLIST_BY_TYPE": "select cast(caption as varchar(100)) caption,name as name from \r\n(select caption||'('||name||')' caption, name\r\n    from tstructs where 'tstruct' =  :type\r\nunion all\r\nselect caption||'('||name||')' caption, name from\r\n    iviews where 'iview' =  :type\r\nunion all\r\nselect caption||'('||name||')' caption, name from\r\n    axpages where 'page' =  :type)a\r\norder by 1",
      "HLINK_PARAMLIST_BY_STRUCTTYPE": "SELECT  cast(pname AS varchar(100)) name, cast(pname AS varchar(100)) caption FROM (  SELECT  pname,'1' dcname,ordno FROM iviewparams WHERE 'iview' =  :type AND iname =  :sname   UNION ALL  SELECT fname,c2.dcname,c2.ordno FROM axpflds c2 WHERE 'tstruct' =  :type AND tstruct =  :sname  UNION  SELECT  concat(tablename,'ID'),dname,0 FROM axpdc d WHERE  :type IN ('tstruct', 'page') AND tstruct =  :sname  UNION  SELECT  a.fname,a.dcname,a.ordno  FROM axpflds a, axpages b WHERE a.tstruct = substr(pagetype, 2) AND b.pagetype != 'web' AND 'page' =  :type AND b.name =  :sname   UNION ALL  SELECT REGEXP_SUBSTR(a.params, '[^,]+', 1, LEVEL) AS param_value,        NULL AS col2,        0 AS col3 FROM htmlsections a JOIN axpages b ON a.pageno = SUBSTR(b.name, 3) WHERE b.pagetype = 'web'   AND 'page' = :type   AND a.pageno = :sname   AND a.CAPTION ='test' CONNECT BY REGEXP_SUBSTR(a.params, '[^,]+', 1, LEVEL) IS NOT NULL    AND PRIOR a.pageno = a.pageno    AND PRIOR DBMS_RANDOM.VALUE IS NOT NULL  UNION ALL  SELECT  DISTINCT REGEXP_SUBSTR(db_function_params, '[^,]+', 1, LEVEL),null,0 FROM  (SELECT REGEXP_SUBSTR(forms_transid, '[^,]+', 1, LEVEL) AS stransid,db_function_params FROM axpdef_axvars WHERE  :type = 'tstruct' CONNECT BY REGEXP_SUBSTR(forms_transid, '[^,]+', 1, LEVEL) IS NOT NULL UNION ALL SELECT REGEXP_SUBSTR(reports_transid, '[^,]+', 1, LEVEL) AS stransid,db_function_params FROM axpdef_axvars WHERE  :type =  'iview'  CONNECT BY REGEXP_SUBSTR(reports_transid, '[^,]+', 1, LEVEL) IS NOT NULL)a WHERE stransid = :sname CONNECT BY REGEXP_SUBSTR(db_function_params, '[^,]+', 1, LEVEL) IS NOT NULL  ) s",
      "TSTLIST_MASK": "select distinct cast(concat(b.caption,'-(',b.transid,')') as varchar(500))\r\n    frmcap,b.transid from axpflds a,tstructs b \r\nwhere a.tstruct = b.transid\r\nand coalesce(a.mask,'No Mask')!='No Mask'\r\norder by 1",
      "FLDLIST_MASKED": "select cast(concat(caption,'-(',fname,')') as varchar(500))\r\n    caption,fname as name from\r\n    axpflds\r\nwhere tstruct=  :structname and \r\ncoalesce(mask,'No Mask')!='No Mask'\r\norder by 1",
      "CUSTOMDATATYPE_LIST": "select cast(typename as varchar(20)) name,cast(typename as varchar(20)) caption,datatype,width,dwidth from axp_customdatatype where isactive ='T' union all select cast('NA' as varchar(20)) as name ,cast('NA' as varchar(20)) as caption ,datatype ,width,deci  as dwidth from customtypes where typename = :customdatatype and  :customdatatype is not NULL",
      "ENCRIPTED_FORM_LIST": "select distinct cast((b.caption||'-('||b.name||')') as varchar(500)) caption,b.name as name from axpflds a,tstructs b where  a.tstruct = b.name and coalesce(a.encrypted,'F')='T' order by 1",
      "ENCRIPTED_FIELD_LIST_BY_FORM": "select cast((caption||'-('||fname||')') as varchar(500)) caption ,fname  as name from axpflds where tstruct= :structname and coalesce(encrypted,'F') ='T' order by 1",
      "MASKED_FORM_LIST": "select distinct cast((b.caption||'-('||b.name||')') as varchar(500)) caption,b.name as name from axpflds a,tstructs b where  a.tstruct = b.name and coalesce(a.masking,'No Mask')!='No Mask'  order by 1",
      "MASKED_FIELD_LIST_BY_FORM": "select cast((caption||'-('||fname||')') as varchar(500)) caption ,fname  as name,masking,maskchar,maskroles,firstcharmask,lastcharmask from axpflds where tstruct= :structname and coalesce(masking,'No Mask')!='No Mask' order by 1",
      "FIELDLIST_BY_FORM_UNION_TABLEIDS": "select (case when allowempty='F' then replace(caption,'*','') else caption END||'-('||fname||')') caption,fname name from axpflds where tstruct=:structname union all select distinct (tablename||'id-('||tablename||'id)'),tablename||'id' from axpdc  where tstruct=:structname order by 1"





    }
  }
}
