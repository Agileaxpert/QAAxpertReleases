/*https://web.agile-labs.com/minZIP/*//*version=3.9.1*/function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var a=0;a<e.length;a++){var o=e[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,a){return e&&_defineProperties(t.prototype,e),a&&_defineProperties(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}var dtCulture=eval(callParent("glCulture")),advFilterDtCulture="en-us"==dtCulture?"MM/DD/YYYY":"DD/MM/YYYY",EntityCommon=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"isAppManager",value:function(){var t,e,a,o,n,r;return!!callParentNew("isMobile")||"block"==(null===(t=window.top.$.axpertUI)||void 0===t?void 0:null===(e=t.options)||void 0===e?void 0:null===(a=e.axpertUserSettings)||void 0===a?void 0:null===(o=a.settings)||void 0===o?void 0:null===(n=o.axUserOptions)||void 0===n?void 0:null===(r=n.configurationStudio)||void 0===r?void 0:r.display)}},{key:"getInitials",value:function(t){var e="",a=t.split(" ");return 1===a.length?e=1==a[0].length?a[0].charAt(0):a[0].charAt(0)+a[0].charAt(1):2===a.length?e=a[0].charAt(0)+a[1].charAt(0):a.length>=3&&(e=a[0].charAt(0)+a[1].charAt(0)),e.toUpperCase()}},{key:"isEmpty",value:function(t){return""==t}},{key:"isNull",value:function(t){return null==t}},{key:"isNullOrEmpty",value:function(t){return null==t||""==t}},{key:"inValid",value:function(t){return null==t||void 0===t||""==t}},{key:"isValid",value:function(t){return!this.inValid(t)}},{key:"isUndefined",value:function(t){return void 0===t}},{key:"setAnalyticsDataWS",value:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(){},a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:function(){},o=function(t){$.ajax({url:top.window.location.href.toLowerCase().substring(0,top.window.location.href.toLowerCase().indexOf("/aspx/"))+"/aspx/Analytics.aspx/SetAnalyticsDataWS",type:"POST",cache:!1,async:!0,dataType:"json",data:JSON.stringify(t),contentType:"application/json",success:function(t){e&&"function"==typeof e&&e(t.d||t)},error:function(t){console.error("Error in SetAnalyticsDataWS:",t),a&&"function"==typeof a&&a(t)}})};this.isAppManager()&&t.confirmNeeded?($("#confirmationModal").appendTo("body").css("z-index",1100).modal("show"),$("#btnAllUsers").off("click").on("click",function(){t.allUsers=!0,o(t),$("#confirmationModal").modal("hide")}),$("#btnJustMyself").off("click").on("click",function(){t.allUsers=!1,o(t),$("#confirmationModal").modal("hide")})):o(t)}},{key:"getAnalyticsDataWS",value:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(){},a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:function(){};$.ajax({url:top.window.location.href.toLowerCase().substring(0,top.window.location.href.toLowerCase().indexOf("/aspx/"))+"/aspx/Analytics.aspx/GetAnalyticsDataWS",type:"POST",cache:!1,async:!0,dataType:"json",data:JSON.stringify(t),contentType:"application/json",success:function(t){e&&"function"==typeof e&&e(t.d||t)},error:function(t){a&&"function"==typeof a&&a(t)}})}},{key:"setAnalyticsDataSyncWS",value:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(){},a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:function(){},o=function(t){$.ajax({url:top.window.location.href.toLowerCase().substring(0,top.window.location.href.toLowerCase().indexOf("/aspx/"))+"/aspx/Analytics.aspx/SetAnalyticsDataWS",type:"POST",cache:!1,async:!1,dataType:"json",data:JSON.stringify(t),contentType:"application/json",success:function(t){e&&"function"==typeof e&&e(t.d||t)},error:function(t){console.error("Error in SetAnalyticsDataWS:",t),a&&"function"==typeof a&&a(t)}})};this.isAppManager()&&t.confirmNeeded?($("#confirmationModal").appendTo("body").css("z-index",1100).modal("show"),$("#btnAllUsers").on("click",function(){t.allUsers=!0,o(t),$("#confirmationModal").modal("hide")}),$("#btnJustMyself").on("click",function(){t.allUsers=!1,o(t),$("#confirmationModal").modal("hide")})):o(t)}},{key:"getAnalyticsDataSyncWS",value:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(){},a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:function(){};$.ajax({url:top.window.location.href.toLowerCase().substring(0,top.window.location.href.toLowerCase().indexOf("/aspx/"))+"/aspx/Analytics.aspx/GetAnalyticsDataWS",type:"POST",cache:!1,async:!1,dataType:"json",data:JSON.stringify(t),contentType:"application/json",success:function(t){e&&"function"==typeof e&&e(t.d||t)},error:function(t){a&&"function"==typeof a&&a(t)}})}},{key:"getEntityEditableFlag",value:function(t){var e=!1;return this.callAPI("../aspx/Entity.aspx/GetEntityEditableFlagWS",t,!1,function(t){if(t.success){if(t.response.indexOf("SessionId is not valid")>-1)return parent.window.location="../aspx/sess.aspx",void(e=!0);t.response.indexOf(':\\"T\\"')>-1&&(e=!0)}else e=!1}),e}},{key:"getDataFromDataSource",value:function(t){arguments.length>1&&arguments[1]!==undefined&&arguments[1],arguments.length>2&&arguments[2]!==undefined&&arguments[2];alert("EntityCommon.getDataFromDataSource method is deprecated. Use EntityCommon.getDataFromAxList method or AxInterface.GetDataFromAxList instead.")}},{key:"getDataFromAxList",value:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(){},a=arguments.length>2&&arguments[2]!==undefined?arguments[2]:function(){};if(!t)throw new Error("Parameter 'data' is required.");if(!Array.isArray(t.adsNames))throw new Error("'adsNames' is required and must be an array.");"undefined"==typeof t.refreshCache&&(t.refreshCache=!1),"undefined"==typeof t.keyField&&(t.keyField=""),"undefined"==typeof t.keyValue&&(t.keyValue=""),"undefined"==typeof t.sqlParams&&(t.sqlParams={}),"undefined"==typeof t.props&&(t.props={}),$.ajax({url:top.window.location.href.toLowerCase().substring(0,top.window.location.href.toLowerCase().indexOf("/aspx/"))+"/aspx/AxPEG.aspx/GetDataFromAxList",type:"POST",cache:!1,async:!0,dataType:"json",data:JSON.stringify(t),contentType:"application/json",success:function(t){e&&"function"==typeof e&&e(t.d||t)},error:function(t){a&&"function"==typeof a&&a(t)}})}},{key:"getDatesBasedonSelection",value:function(t){var e={from:"",to:""},a="en-us"==dtCulture?"MM/DD/YYYY":"DD/MM/YYYY";switch(t){case"customOption":break;case"todayOption":var o=new Date;e.from=e.to=moment(o).format(a);break;case"yesterdayOption":(o=new Date).setDate(o.getDate()-1),e.from=e.to=moment(o).format(a);break;case"tomorrowOption":(o=new Date).setDate(o.getDate()+1),e.from=e.to=moment(o).format(a);break;case"this_weekOption":o=this.getFirstDayOfWeek(new Date);e.from=moment(o).format(a),o.setDate(o.getDate()+6),e.to=moment(o).format(a);break;case"last_weekOption":(o=this.getFirstDayOfWeek(new Date)).setDate(o.getDate()-7),e.from=moment(o).format(a),o.setDate(o.getDate()+6),e.to=moment(o).format(a);break;case"next_weekOption":(o=this.getFirstDayOfWeek(new Date)).setDate(o.getDate()+7),e.from=moment(o).format(a),o.setDate(o.getDate()+6),e.to=moment(o).format(a);break;case"this_monthOption":(o=this.getFirstDayOfWeek(new Date)).setDate(1),e.from=moment(o).format(a),o.setMonth(o.getMonth()+1),o.setDate(0),e.to=moment(o).format(a);break;case"last_monthOption":(o=this.getFirstDayOfWeek(new Date)).setDate(1),o.setMonth(o.getMonth()-1),e.from=moment(o).format(a),o.setMonth(o.getMonth()+1),o.setDate(0),e.to=moment(o).format(a);break;case"next_monthOption":(o=this.getFirstDayOfWeek(new Date)).setDate(1),o.setMonth(o.getMonth()+1),e.from=moment(o).format(a),o.setMonth(o.getMonth()+1),o.setDate(0),e.to=moment(o).format(a);break;case"this_quarterOption":o=new Date;var n=Math.floor((o.getMonth()+3)/3);o.setDate(1),o.setMonth(3*n-3),e.from=moment(o).format(a),o.setMonth(o.getMonth()+3),o.setDate(0),e.to=moment(o).format(a);break;case"last_quarterOption":o=new Date;0==(n=Math.floor((o.getMonth()+3)/3)-1)&&(n=4,o.setFullYear(o.getFullYear()-1)),o.setDate(1),o.setMonth(3*n-3),e.from=moment(o).format(a),o.setMonth(o.getMonth()+3),o.setDate(0),e.to=moment(o).format(a);break;case"next_quarterOption":o=new Date;5==(n=Math.floor((o.getMonth()+3)/3)+1)&&(n=1,o.setFullYear(o.getFullYear()+1)),o.setDate(1),o.setMonth(3*n-3),e.from=moment(o).format(a),o.setMonth(o.getMonth()+3),o.setDate(0),e.to=moment(o).format(a);break;case"this_yearOption":(o=new Date).setDate(1),o.setMonth(0),e.from=moment(o).format(a),o.setFullYear(o.getFullYear()+1),o.setMonth(0),o.setDate(0),e.to=moment(o).format(a);break;case"last_yearOption":(o=new Date).setFullYear(o.getFullYear()-1),o.setDate(1),o.setMonth(0),e.from=moment(o).format(a),o.setFullYear(o.getFullYear()+1),o.setMonth(0),o.setDate(0),e.to=moment(o).format(a);break;case"next_yearOption":(o=new Date).setFullYear(o.getFullYear()+1),o.setDate(1),o.setMonth(0),e.from=moment(o).format(a),o.setFullYear(o.getFullYear()+1),o.setMonth(0),o.setDate(0),e.to=moment(o).format(a)}return e}},{key:"getDatesBasedonSelectionForBetweenFilter",value:function(t){var e={from:"",to:""};switch(t){case"customOption":break;case"todayOption":var a=new Date;e.from=moment(a).format("DD-MMM-YYYY"),a.setDate(a.getDate()+1),e.to=moment(a).format("DD-MMM-YYYY");break;case"yesterdayOption":(a=new Date).setDate(a.getDate()-1),e.from=moment(a).format("DD-MMM-YYYY"),a.setDate(a.getDate()+1),e.to=moment(a).format("DD-MMM-YYYY");break;case"tomorrowOption":(a=new Date).setDate(a.getDate()+1),e.from=moment(a).format("DD-MMM-YYYY"),a.setDate(a.getDate()+1),e.to=moment(a).format("DD-MMM-YYYY");break;case"this_weekOption":a=this.getFirstDayOfWeek(new Date);e.from=moment(a).format("DD-MMM-YYYY"),a.setDate(a.getDate()+7),e.to=moment(a).format("DD-MMM-YYYY");break;case"last_weekOption":(a=this.getFirstDayOfWeek(new Date)).setDate(a.getDate()-7),e.from=moment(a).format("DD-MMM-YYYY"),a.setDate(a.getDate()+7),e.to=moment(a).format("DD-MMM-YYYY");break;case"next_weekOption":(a=this.getFirstDayOfWeek(new Date)).setDate(a.getDate()+7),e.from=moment(a).format("DD-MMM-YYYY"),a.setDate(a.getDate()+7),e.to=moment(a).format("DD-MMM-YYYY");break;case"this_monthOption":(a=this.getFirstDayOfWeek(new Date)).setDate(1),e.from=moment(a).format("DD-MMM-YYYY"),a.setMonth(a.getMonth()+1),a.setDate(a.getDate()+1),e.to=moment(a).format("DD-MMM-YYYY");break;case"last_monthOption":(a=this.getFirstDayOfWeek(new Date)).setDate(1),a.setMonth(a.getMonth()-1),e.from=moment(a).format("DD-MMM-YYYY"),a.setMonth(a.getMonth()+1),a.setDate(a.getDate()+1),e.to=moment(a).format("DD-MMM-YYYY");break;case"next_monthOption":(a=this.getFirstDayOfWeek(new Date)).setDate(1),a.setMonth(a.getMonth()+1),e.from=moment(a).format("DD-MMM-YYYY"),a.setMonth(a.getMonth()+1),a.setDate(a.getDate()+1),e.to=moment(a).format("DD-MMM-YYYY");break;case"this_quarterOption":a=new Date;var o=Math.floor((a.getMonth()+3)/3);a.setDate(1),a.setMonth(3*o-3),e.from=moment(a).format("DD-MMM-YYYY"),a.setMonth(a.getMonth()+3),a.setDate(a.getDate()+1),e.to=moment(a).format("DD-MMM-YYYY");break;case"last_quarterOption":a=new Date;0==(o=Math.floor((a.getMonth()+3)/3)-1)&&(o=4,a.setFullYear(a.getFullYear()-1)),a.setDate(1),a.setMonth(3*o-3),e.from=moment(a).format("DD-MMM-YYYY"),a.setMonth(a.getMonth()+3),a.setDate(a.getDate()+1),e.to=moment(a).format("DD-MMM-YYYY");break;case"next_quarterOption":a=new Date;5==(o=Math.floor((a.getMonth()+3)/3)+1)&&(o=1,a.setFullYear(a.getFullYear()+1)),a.setDate(1),a.setMonth(3*o-3),e.from=moment(a).format("DD-MMM-YYYY"),a.setMonth(a.getMonth()+3),a.setDate(a.getDate()+1),e.to=moment(a).format("DD-MMM-YYYY");break;case"this_yearOption":(a=new Date).setDate(1),a.setMonth(0),e.from=moment(a).format("DD-MMM-YYYY"),a.setFullYear(a.getFullYear()+1),a.setMonth(0),a.setDate(a.getDate()+1),e.to=moment(a).format("DD-MMM-YYYY");break;case"last_yearOption":(a=new Date).setFullYear(a.getFullYear()-1),a.setDate(1),a.setMonth(0),e.from=moment(a).format("DD-MMM-YYYY"),a.setFullYear(a.getFullYear()+1),a.setMonth(0),a.setDate(a.getDate()+1),e.to=moment(a).format("DD-MMM-YYYY");break;case"next_yearOption":(a=new Date).setFullYear(a.getFullYear()+1),a.setDate(1),a.setMonth(0),e.from=moment(a).format("DD-MMM-YYYY"),a.setFullYear(a.getFullYear()+1),a.setMonth(0),a.setDate(a.getDate()+1),e.to=moment(a).format("DD-MMM-YYYY")}return e}},{key:"getFirstDayOfWeek",value:function(t){var e=(t=new Date(t)).getDay(),a=t.getDate()-e+(0==e?-6:1);return new Date(t.setDate(a))}},{key:"callAPI",value:function(t,e,a,o){var n=this,r=new XMLHttpRequest;r.open("POST",t,a),r.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.isAxpertFlutter&&(r.setRequestHeader("Authorization","Bearer ".concat(armToken)),e.armSessionId=armSessionId),r.onreadystatechange=function(){4==this.readyState&&(200==this.status?o({success:!0,response:this.responseText}):(n.catchError(this.responseText),o({success:!1,response:this.responseText})))},r.send(JSON.stringify(e))}},{key:"catchError",value:function(t){showAlertDialog("error",t)}},{key:"showSuccess",value:function(t){showAlertDialog("success",t)}},{key:"dataConvert",value:function(t,e){if("AXPERT"==e)try{if("undefined"!=typeof(t=JSON.parse(t.d)).result[0].result.row)return t.result[0].result.row;if("undefined"!=typeof t.result[0].result)return t.result[0].result}catch(a){ShowDimmer(!1),this.catchError(a.message)}else if("ARM"==e)try{if(this.isAxpertFlutter||(t=JSON.parse(t.d)),t.result&&t.result.success){if(!this.isUndefined(t.result.data))return t.result.data}else this.isUndefined(t.result.message)||this.catchError(t.result.message)}catch(a){ShowDimmer(!1),this.catchError(a.message)}return t}},{key:"generateFldId",value:function(){return"fid".concat(Date.now()).concat(Math.floor(9e4*Math.random())+1e4)}},{key:"loadHyperLink",value:function(t,e){void 0!==e&&"true"==e&&parent.ShowDimmer(!0),window.top.LoadIframe(t)}},{key:"navigateToUrl",value:function(t){window.top.navigateToUrl(t)}},{key:"replaceSpecialChars",value:function(t){return-1!=t.indexOf(";bkslh")&&(t=t.replace(new RegExp(";bkslh","g"),"\\")),t=t.replace("T00:00:00","")}},{key:"getCardData",value:function(t){var e,a,o,n,r,s;return window.location.href.toLowerCase().indexOf("dashboardtemplate.html")>-1?(null===(e=$.axpertUI_dashboard)||void 0===e?void 0:null===(a=e.dashboardcardsPage)||void 0===a?void 0:null===(o=a.cardsData)||void 0===o?void 0:o[t])||[]:(null===(n=$.axpertUI)||void 0===n?void 0:null===(r=n.cardsPage)||void 0===r?void 0:null===(s=r.cardsData)||void 0===s?void 0:s[t])||[]}}]),t}();function AxGetGlobalVar(){var t="";return $.ajax({url:top.window.location.href.toLowerCase().substring("0",top.window.location.href.indexOf("/aspx/")+6)+"axinterface.aspx/GetGlobalVar",type:"POST",cache:!1,async:!1,dataType:"json",contentType:"application/json",success:function(e){t=""!=e.d?JSON.parse(e.d):""},error:function(e){t=e}}),t}