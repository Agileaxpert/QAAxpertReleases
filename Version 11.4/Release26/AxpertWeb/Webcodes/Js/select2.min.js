/*https://web.agile-labs.com/minZIP/*//*version=3.9.1*/function _createForOfIteratorHelper(e,t){var l="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!l){if(Array.isArray(e)||(l=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){l&&(e=l);var a=0,s=function(){};return{s:s,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,d=!1;return{s:function(){l=l.call(e)},n:function(){var e=l.next();return i=e.done,e},e:function(e){d=!0,r=e},f:function(){try{i||null==l["return"]||l["return"]()}finally{if(d)throw r}}}}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var l=Object.prototype.toString.call(e).slice(8,-1);return"Object"===l&&e.constructor&&(l=e.constructor.name),"Map"===l||"Set"===l?Array.from(e):"Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var l=0,a=new Array(t);l<t;l++)a[l]=e[l];return a}var dtAssoc=[],searchResult=[],AutPageNo=1,AutPageSize=50,rcount=0,fetchRCount=FetchPickListRows||1e3;PageCount=0;var CangefldName="",isNavigation=!1,refreshAC=!1,pickarrow=!1,isAutocomBlur=!0,isSelectedValFocus=!1,isRefreshClick=!1,isDataStoreInLs="";function createFormSelect(fld){var formSelect=$(fld),fldNameAc="",fieldName="",fastdll="",termVal="",depFldName="",isPickMinChar=!1,isOnCLose=!1,parentFldVal="",IsBindData=!1,isFillFromApi=!1;formSelect.select2({ajax:{url:"tstruct.aspx/GetAutoCompleteData",type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",delay:"undefined"==typeof params.term||""==params.term?50:250,data:function(e){GetCurrentTime("Tstruct "+fldNameAc+" Dropdown click(ws call)");var t=$(this);if(!select2IsOpened||"undefined"!=typeof e.term&&""!=e.term)if(select2IsFocused){var l=!1;"open"==select2EventType&&(l=!0),"0"==recordid?(select2EventType="open",select2IsOpened=!1):select2IsOpened=!0,void 0===(termVal=""==e.term?undefined:isSelectedValFocus?undefined:e.term)&&null!=t.val()&&"false"==isAddRowWsCalled?termVal="":void 0===termVal&&null==t.val()&&"false"==isAddRowWsCalled&&l&&(l=!1,termVal="")}else"undefined"!=typeof e.term&&""!=e.term&&(termVal=e.term);else{if("true"==isAddRowWsCalled)return isAddRowWsCalled=t.attr("id"),select2EventType="tab",select2IsFocused=!0,void t.select2("close");termVal=""}if(1==(fastdll=!!t.hasClass("multiFldChk")||t.hasClass("fastdll"))||0==fastdll&&""==termVal||0==fastdll&&(void 0===termVal||termVal.length>1)){isPickMinChar=!1;var a=$(this).hasClass("isrefreshsave"),s=GetAutoCompData(fldNameAc,termVal,AutPageNo,AutPageSize),r=fldNameAc.substring(0,fldNameAc.lastIndexOf("F")-3);parentFldVal="",parentFldVal="undefined"!=typeof wsPerfEnabled&&wsPerfEnabled?ISBoundAutoCom(r,fldNameAc):ISBoundNew(r,fldNameAc);var i=GetFieldIndex(r),d=FldIsAPI[i],n=FldDSqlParams[i],o=GetFieldParamList(r),c=!0;if(""!=PrevGridEditedRow&&IsGridField(r)){var u=PrevGridEditedRow.substring(PrevGridEditedRow.lastIndexOf("F"),PrevGridEditedRow.lastIndexOf("F")-3);fldNameAc.substring(fldNameAc.lastIndexOf("F"),fldNameAc.lastIndexOf("F")-3)!=u&&(c=!1)}""==isDataStoreInLs&&checkDevOptDdlStoreLS();var f=top.window.location.href.toLowerCase().substring("0",top.window.location.href.indexOf("/aspx/"));if("true"==isDataStoreInLs&&1==fastdll&&"undefined"!=typeof localStorage&&getDdlKeysWithPrefix("tstDDFVal♠"+transid+"♦"+r+"♦"+parentFldVal+"♦"+f+"♥").length>0&&!isRefreshClick&&!t.hasClass("multiFldChk")&&c&&"true"!=d)IsBindData=!0;else{if(!(FldListParents.length>0&&FldListParents.indexOf(r+"♦"+fldNameAc+"♦"+parentFldVal)>-1&&""==termVal)||isRefreshClick||t.hasClass("multiFldChk")||!c||"true"==d)return GetProcessTime(),IsBindData=!1,isRefreshClick=!1,JSON.stringify({tstDataId:tstDataId,FldName:r,FltValue:termVal,ChangedFields:ChangedFields,ChangedFieldDbRowNo:ChangedFieldDbRowNo,ChangedFieldValues:ChangedFieldValues,DeletedDCRows:DeletedDCRows,pageData:s,fastdll:fastdll,fldNameAc:fldNameAc,refreshAC:refreshAC,pickArrow:pickarrow,parentsFlds:parentFldVal,rfSave:a,IsApiFld:d,tblSourceParams:"",isTstHtmlLs:resTstHtmlLS,ddlFldSqlParams:n,ddlSqlPNames:o});IsBindData=!0}}else{IsBindData=!1,rcount=0,isPickMinChar=!0;var p=fldNameAc.substring(0,fldNameAc.lastIndexOf("F")-3);if(FldListParents.indexOf(p+"♦"+fldNameAc+"♦"+parentFldVal)>-1||FldListParents.some(function(e){return e.startsWith(p+"♦")})){var m=FldListParents.indexOf(p+"♦"+fldNameAc+"♦"+parentFldVal)>-1?FldListParents.indexOf(p+"♦"+fldNameAc+"♦"+parentFldVal):FldListParents.findIndex(function(e){return e.startsWith(p+"♦")},p+"♦");FldListParents.splice(m,1),FldListData.splice(m,1)}}},processResults:function processResults(data){IsBindData=!1,select2EventType="open",refreshAC=!1;var arabic=/[\u0600-\u06FF]/;try{var result=data.d.toString().replace(new RegExp("\\n","g"),"");if(""!=result&&(""!=result&&result.split("♣*♣").length>1&&(tstDataId=result.split("♣*♣")[0],result=result.split("♣*♣")[1]),result.split("*♠*").length>1?(serverprocesstime=result.split("*♠*")[1],requestProcess_logtime=result.split("*♠*")[2],result=result.split("*♠*")[0],WireElapsTime(serverprocesstime,requestProcess_logtime,!0)):UpdateExceptionMessageInET("Error : "+result)),CheckSessionTimeout(result))return;if(GetTotalElapsTime(),result=result.toString().replace(new RegExp("\\t","g"),"&#9;"),resTstHtmlLS="",ChangedFields=new Array,ChangedFieldDbRowNo=new Array,ChangedFieldValues=new Array,DeletedDCRows=new Array,!result.toLowerCase().includes("access violation")||!result.toLowerCase().includes("asbtstruct.dll")){if(PrevGridEditedRow="",result.indexOf("♥")>-1){var _fldParamNames=result.split("♥")[1];SetFieldParamList(fldNameAc,_fldParamNames),result=result.split("♥")[0]}var serResult=$.parseJSON(result);if(datasss=serResult,serResult.error)return void ExecErrorMsg(serResult.error,"autocomplete");var rcountNew=0;try{isFillFromApi=!1,"undefined"==typeof serResult.pickdata&&"undefined"!=typeof serResult.result?(isFillFromApi=!0,rcountNew=serResult.result[2].data.length,depFldName=serResult.result[1].dfname):(rcountNew=serResult.pickdata[0].rcount,depFldName=serResult.pickdata[2].dfname)}catch(ex){rcountNew=serResult.pickdata[0].rcount,depFldName=serResult.pickdata[2].dfname}0!=rcountNew&&(rcount=parseInt(rcountNew)),rcount=rcount<fetchRCount?rcount:fetchRCount,PageCount=Math.ceil(rcount/AutPageSize),0==PageCount&&(PageCount=1),countPerPage=rcount,1==AutPageNo?1==PageCount?($("#autoleft"+fldNameAc).prop("disabled",!0).addClass("disabled"),$("#autoright"+fldNameAc).prop("disabled",!0).addClass("disabled")):$("#autoright"+fldNameAc).prop("disabled",!1).removeClass("disabled"):AutPageNo>1&&PageCount<=AutPageNo&&$("#autoright"+fldNameAc).prop("disabled",!0).addClass("disabled");try{dtAssoc="undefined"==typeof serResult.pickdata&&"undefined"!=typeof serResult.result?serResult.result[2].data:serResult.pickdata[3].data}catch(ex){dtAssoc=serResult.pickdata[3].data}if(dtAssoc!=undefined&&0!=dtAssoc.length){if(!$("#"+fldNameAc).hasClass("multiFldChk")){var _fieldName=fldNameAc.substring(0,fldNameAc.lastIndexOf("F")-3);if(""==isDataStoreInLs&&checkDevOptDdlStoreLS(),1==fastdll&&"true"==isDataStoreInLs)setDropdownDatafromLS("tstDDFVal♠"+transid+"♦"+_fieldName+"♦"+parentFldVal,JSON.stringify(serResult));else if(""==termVal)if(FldListParents.indexOf(_fieldName+"♦"+fldNameAc+"♦"+parentFldVal)>-1||FldListParents.some(function(e){return e.startsWith(_fieldName+"♦")})){var _tIdn=FldListParents.indexOf(_fieldName+"♦"+fldNameAc+"♦"+parentFldVal)>-1?FldListParents.indexOf(_fieldName+"♦"+fldNameAc+"♦"+parentFldVal):FldListParents.findIndex(function(e){return e.startsWith(_fieldName+"♦")},_fieldName+"♦");FldListParents[_tIdn]=_fieldName+"♦"+fldNameAc+"♦"+parentFldVal,FldListData[_tIdn]=serResult}else FldListParents.push(_fieldName+"♦"+fldNameAc+"♦"+parentFldVal),FldListData.push(serResult);else if(FldListParents.indexOf(_fieldName+"♦"+fldNameAc+"♦"+parentFldVal)>-1||FldListParents.some(function(e){return e.startsWith(_fieldName+"♦")})){var _tIdn2=FldListParents.indexOf(_fieldName+"♦"+fldNameAc+"♦"+parentFldVal)>-1?FldListParents.indexOf(_fieldName+"♦"+fldNameAc+"♦"+parentFldVal):FldListParents.findIndex(function(e){return e.startsWith(_fieldName+"♦")},_fieldName+"♦");FldListParents.splice(_tIdn2,1),FldListData.splice(_tIdn2,1)}}if($(this.$element).hasClass("multiFldChk")&&$(".msSelectAllOption").removeClass("d-none"),fastdll){var aSearch=[];if($(dtAssoc).each(function(e,t){t.i=t.i.replace(/\^\^dq/g,"&quot;"),"undefined"!=typeof DropdownSStartsWith&&""!=DropdownSStartsWith&&"starts with"==DropdownSStartsWith?arabic.test(t.i.toLowerCase())&&t.i.toLowerCase().endsWith(termVal.toLowerCase())?aSearch.push(t):t.i.toLowerCase().startsWith(termVal.toLowerCase())&&aSearch.push(t):t.i.toLowerCase().indexOf(termVal.toLowerCase())>=0&&aSearch.push(t)}),$("#"+fldNameAc).data("rowcount",aSearch.length),0!=aSearch.length){var result=$.map(aSearch,function(e){return e.i=e.i.replace(/\^\^dq/g,"&quot;"),{id:e.i,text:e.i,dep:e.d}});return"true"==AxRulesDefFilter&&(result=AxFilterDropDownResult(fldNameAc,result)),searchResult=result,{results:result}}if($(this.$element).hasClass("multiFldChk"))$(".msSelectAllOption").addClass("d-none");else{var _fieldName2=fldNameAc.substring(0,fldNameAc.lastIndexOf("F")-3);if(FldListParents.indexOf(_fieldName2+"♦"+fldNameAc+"♦"+parentFldVal)>-1||FldListParents.some(function(e){return e.startsWith(_fieldName2+"♦")})){var _tIdn3=FldListParents.indexOf(_fieldName2+"♦"+fldNameAc+"♦"+parentFldVal)>-1?FldListParents.indexOf(_fieldName2+"♦"+fldNameAc+"♦"+parentFldVal):FldListParents.findIndex(function(e){return e.startsWith(_fieldName2+"♦")},_fieldName2+"♦");FldListParents.splice(_tIdn3,1),FldListData.splice(_tIdn3,1)}}AxFldBlurFromSelect="";var cutMsg=eval(callParent("lcm[0]"));return{results:"",noResults:cutMsg}}var result=$.map(dtAssoc,function(e){if(""==termVal)return e.i=e.i.replace(/\^\^dq/g,"&quot;"),{id:e.i,text:e.i,dep:e.d};if("undefined"!=typeof DropdownSStartsWith&&""!=DropdownSStartsWith&&"starts with"==DropdownSStartsWith){if(arabic.test(e.i.toLowerCase())&&e.i.toLowerCase().endsWith(termVal.toLowerCase()))return e.i=e.i.replace(/\^\^dq/g,"&quot;"),{id:e.i,text:e.i,dep:e.d};if(e.i.toLowerCase().startsWith(termVal.toLowerCase()))return e.i=e.i.replace(/\^\^dq/g,"&quot;"),{id:e.i,text:e.i,dep:e.d}}else if(termVal.indexOf("%")>-1){var t=!1,l=termVal.split("%");if($.each(l,function(l,a){var s=a.split("_");$.each(s,function(l,a){e.i.toLowerCase().indexOf(a.toLowerCase())>=0&&(t=!0)})}),t)return e.i=e.i.replace(/\^\^dq/g,"&quot;"),{id:e.i,text:e.i,dep:e.d}}else if(e.i.toLowerCase().indexOf(termVal.toLowerCase())>=0)return e.i=e.i.replace(/\^\^dq/g,"&quot;"),{id:e.i,text:e.i,dep:e.d}});return"true"==AxRulesDefFilter&&(result=AxFilterDropDownResult(fldNameAc,result)),searchResult=result,{results:result}}if($(this.$element).hasClass("multiFldChk"))$(".msSelectAllOption").addClass("d-none");else{var _fieldName3=fldNameAc.substring(0,fldNameAc.lastIndexOf("F")-3);if(FldListParents.indexOf(_fieldName3+"♦"+fldNameAc+"♦"+parentFldVal)>-1||FldListParents.some(function(e){return e.startsWith(_fieldName3+"♦")})){var _tIdn4=FldListParents.indexOf(_fieldName3+"♦"+fldNameAc+"♦"+parentFldVal)>-1?FldListParents.indexOf(_fieldName3+"♦"+fldNameAc+"♦"+parentFldVal):FldListParents.findIndex(function(e){return e.startsWith(_fieldName3+"♦")},_fieldName3+"♦");FldListParents.splice(_tIdn4,1),FldListData.splice(_tIdn4,1)}}AxFldBlurFromSelect="";var cutMsg=eval(callParent("lcm[0]"));return{results:"",noResults:cutMsg}}AxWaitCursor(!1),ShowDimmer(!1),$("#reloaddiv").show(),$("#dvlayout").hide()}catch(exception){-1!=exception.message.toLowerCase().indexOf("access violation")&&(AxWaitCursor(!1),ShowDimmer(!1),$("#reloaddiv").show(),$("#dvlayout").hide())}},error:function(e){if(IsBindData){var t=top.window.location.href.toLowerCase().substring("0",top.window.location.href.indexOf("/aspx/")),l=fldNameAc.substring(0,fldNameAc.lastIndexOf("F")-3);if(FldListParents.length>0&&FldListParents.indexOf(l+"♦"+fldNameAc+"♦"+parentFldVal)>-1){var a=FldListParents.indexOf(l+"♦"+fldNameAc+"♦"+parentFldVal);depFldName=FldListData[a].pickdata[2].dfname;var s=FldListData[a].pickdata[3].data,r=$.map(s,function(e){return e.i=e.i.replace(/\^\^dq/g,"&quot;"),{id:e.i,text:e.i,dep:e.d}});$(".select2-results__options li:eq(0)").remove(),console.clear(),$("#"+fldNameAc).select2("data",r,!0),$("#"+fldNameAc).select2("updateResults")}else if("true"==isDataStoreInLs&&"undefined"!=typeof localStorage&&getDdlKeysWithPrefix("tstDDFVal♠"+transid+"♦"+l+"♦"+parentFldVal+"♦"+t+"♥").length>0){var i=getDdlKeysWithPrefix("tstDDFVal♠"+transid+"♦"+l+"♦"+parentFldVal+"♦"+t+"♥");if(i.length>0){var d=localStorage[i[0]];if(!d)return;var n=(d=$.parseJSON(d)).pickdata[3].data,o=$.map(n,function(e){return e.i=e.i.replace(/\^\^dq/g,"&quot;"),{id:e.i,text:e.i,dep:e.d}}),c=$("#"+fldNameAc),u=c.val();c.empty(),$.each(o,function(e,t){c.append($("<option>",{value:t.id,text:t.text}))}),c.val(u),c.select2();var f=void 0===c.attr("data-addoption")?"":c.attr("data-addoption"),p=void 0===c.attr("data-refresh")?"":c.attr("data-refresh"),m=fldNameAc,h="";try{var F=GetFieldIndex(GetFieldsName(m));F>-1&&(h=FldIsAPI[F])}catch(v){h=""}var A="";$(this).hasClass("multiFldChk")?($(".select2-results a.fsautorefresh").remove(),""==h&&(A+='<a class="btn btn-sm btn-icon btn-white btn-color-gray-500 btn-active-primary me-2 shadow-sm float-end" id="advSearch'+m+'" title="adv. search" data-ids='+m+'><span class="material-icons material-icons-style material-icons-3">search</span></a><input type=hidden id="pickIdVal_'+m+'" value="" />')):(void 0!==p&&""!=p&&"true"==p?A+='<a class="btn btn-sm btn-icon btn-white btn-color-gray-600 btn-active-primary me-2 shadow-sm ms-2 fsautorefresh" id="autorefresh'+m+'" title="Refresh" data-refresh='+m+'><span class="material-icons material-icons-style material-icons-3">refresh</span></a>':void 0!==p&&""!=p&&"false"==p&&(A+='<a class="btn btn-sm btn-icon btn-white btn-color-gray-600 btn-active-primary me-2 shadow-sm ms-2 disabled" id="autoleft'+m+'" title="Previous" data-fldname='+m+'><span class="material-icons material-icons-style material-icons-3">navigate_before</span></a><a class="btn btn-sm btn-icon btn-white btn-color-gray-500 btn-active-primary me-2 shadow-sm disabled" id="autoright'+m+'" title="Next" data-fldname='+m+'><span class="material-icons material-icons-style material-icons-3">navigate_next</span></a>'),""==h&&(A+='<a class="btn btn-sm btn-icon btn-white btn-color-gray-500 btn-active-primary me-2 shadow-sm float-end" id="advSearch'+m+'" title="adv. search" data-ids='+m+'><span class="material-icons material-icons-style material-icons-3">search</span></a><input type=hidden id="pickIdVal_'+m+'" value="" />'),A+='<a class="btn btn-sm btn-icon btn-white btn-color-gray-500 btn-active-primary me-2 shadow-sm float-end" id="copySelVal'+m+'" title="Copy Selected Value" data-ids='+m+'><span class="material-icons material-icons-style material-icons-3">copy</span></a>'),void 0!==f&&""!=f&&(A+='<a class="btn btn-sm btn-icon btn-primary btn-color-gray-600--- btn-active-primary--- me-2 shadow-sm float-end" id="addOption'+m+'" data-ids='+m+' title="Add Master Data"><span class="material-icons material-icons-style material-icons-3">add</span></a>'),$(".select2-results:not(:has(a))").append(A),clickEvents(m),console.clear()}}}}},placeholder:"Search for a repository",minimumInputLength:0,escapeMarkup:function(e){return e},language:{errorLoading:function(){return isPickMinChar?"Required to search minimum 2 characters":"Start type characters for searching data.."}}}).on("select2:select",function(event){var depList=event.params.data.dep,fldAcValue=$(this).val();if(void 0!==$(this).data("separator")&&$(this).hasClass("multiFldChk")){var separator=$(this).data("separator");fldAcValue=fldAcValue.join(separator)}refreshAC=!1,isGrdEditDirty=!0,dtAssoc=[];var cutMsg=eval(callParent("lcm[0]")),fName=GetFieldsName(fldNameAc),fldIndex=$j.inArray(fName,FNames);if(-1!=fldIndex&&void 0===$("#"+fldNameAc).attr("disabled")&&"True"!=FFieldReadOnly[fldIndex]&&"True"!=FFieldHidden[fldIndex]){var rcID=GetFieldsRowFrameNo(fldNameAc),acFrNo=GetFieldsDcNo(fldNameAc),rowNum=GetDbRowNo(GetFieldsRowNo(fldNameAc),acFrNo),fldRowNo=GetFieldsRowNo(fldNameAc);if(IsDcGrid(acFrNo)&&isGrdEditDirty&&UpdateFieldArray(axpIsRowValid+acFrNo+fldRowNo+"F"+acFrNo,GetDbRowNo(fldRowNo,acFrNo),"","parent","AddRow"),UpdateFieldArray(fldNameAc,rowNum,fldAcValue,"parent","AutoComplete"),UpdateAllFieldValues(fldNameAc,fldAcValue),isFillFromApi){if(depList!=undefined&&null!=depList&&depList!=cutMsg&&""!=depFldName)try{var depText=depList.split("^"),dfCount=0;$.each(depText,function(e,t){var l=depFldName.split("^")[dfCount],a=GetFieldIndex(l);if(dfCount++,a>-1){var s=FldFillFromAPI[a];if(""!=s&&s==fName){var r=t;rcID=rcID.substring(0,rcID.lastIndexOf("F")+1)+GetDcNo(l),""!=r&&(r=r.replace(new RegExp("<br>","g"),"\n")),$("#"+l+rcID).val(r);var i=$("#"+l+rcID).data("type")||$("#"+l+rcID).prop("type");void 0!==i&&"checkbox"==i&&$("#"+l+rcID).hasClass("custInpChk")&&(""==r?$("#"+l+rcID).prop("checked",!1):""!=r&&"f"==r.toLowerCase()?$("#"+l+rcID).prop("checked",!1):""!=r&&"t"==r.toLowerCase()&&$("#"+l+rcID).prop("checked",!0));var d=$j.inArray(l,FNames);"Numeric"==GetFieldType(l,d)&&$("#"+l+rcID).data("attr",r),r!=undefined&&(UpdateFieldArray(l+rcID,rowNum,r,"parent","AutoComplete"),UpdateAllFieldValues(l+rcID,r))}}})}catch(Ex){}}else if(depList!=undefined&&null!=depList&&depList!=cutMsg&&""!=depFldName)try{var depText=depList.split("^"),dfCount=0;$.each(depText,function(e,t){var l=depFldName.split("^")[dfCount],a=t;dfCount++,rcID=rcID.substring(0,rcID.lastIndexOf("F")+1)+GetDcNo(l),""!=a&&(a=a.replace(new RegExp("<br>","g"),"\n")),$("#"+l+rcID).val(a);var s=$("#"+l+rcID).data("type")||$("#"+l+rcID).prop("type");void 0!==s&&"checkbox"==s&&$("#"+l+rcID).hasClass("custInpChk")&&(""==a?$("#"+l+rcID).prop("checked",!1):""!=a&&"f"==a.toLowerCase()?$("#"+l+rcID).prop("checked",!1):""!=a&&"t"==a.toLowerCase()&&$("#"+l+rcID).prop("checked",!0));var r=$j.inArray(l,FNames);"Numeric"==GetFieldType(l,r)&&$("#"+l+rcID).data("attr",a),a!=undefined&&(UpdateFieldArray(l+rcID,rowNum,a,"parent","AutoComplete"),UpdateAllFieldValues(l+rcID,a)),l.toLowerCase().startsWith("axpfile_")&&BindAxpFilesonDep(l+rcID,a)})}catch(Ex){}checkNextSelExpFld(fName,fldIndex),AxFocusedFld="",setTimeout(function(){AxOldValue="",MainBlur($j("#"+fldNameAc))},0)}}).on("select2:unselect",function(e){var t=$(this).attr("id"),l=$(this).val();if(void 0!==$(this).data("separator")&&$(this).hasClass("multiFldChk")){var a=$(this).data("separator");l=l.join(a);GetFieldsRowFrameNo(t);var s=GetFieldsDcNo(t),r=GetDbRowNo(GetFieldsRowNo(t),s);UpdateFieldArray(t,r,l,"parent","AutoComplete"),UpdateAllFieldValues(t,l)}""==l?AxOldValue=" ":$(this).hasClass("multiFldChk")||(AxOldValue=l),AxFocusedFld="",MainBlur($j("#"+t))}).on("select2:open",function(e){var t="scroll.select2";if($(e.target).parents().off(t),$(window).off(t),AxFldBlurFromSelect="",isPickMinChar=!1,select2IsFocused){if("0"!=recordid&&"click"!=select2EventType&&!$(this).hasClass("multiFldChk"))return select2EventType="tab",select2IsFocused=!0,void $(this).select2("close");select2EventType="tab",""!=$(this).val()&&null!=$(this).val()?$(this).hasClass("multiFldChk")?($("input.select2-search__field").val($(this).val()),select2IsOpened=!0,isSelectedValFocus=!0):(isSelectedValFocus=!1,select2IsFocused=!0,select2IsOpened=!1):isOnCLose||$(this).hasClass("multiFldChk")?isOnCLose&&null==$(this).val()&&!$(this).hasClass("multiFldChk")?select2IsFocused=!0:isOnCLose&&""!=$(this).val()&&null!=$(this).val()&&!$(this).hasClass("multiFldChk")&&(select2IsFocused=!1):(select2IsOpened=!0,select2EventType="click"),$(this).attr("id")==AxFocusedFld||""==AxFocusedFld||AxFldBlured==AxFocusedFld||$("#"+AxFocusedFld).hasClass("fldFromSelect")||$("#"+AxFocusedFld).hasClass("multiFldChk")||$("#"+AxFocusedFld).hasClass("gridHeaderSwitch")||$("#"+AxFocusedFld).hasClass("dvgrdchkboxnonedit")||$("#"+AxFocusedFld).hasClass("ckbGridStretchSwitch")?gridRowEditOnLoad&&IsGridField(GetFieldsName($(this).attr("id")))&&UpdateGridRowFlags($(this).attr("id"),GetFieldsDcNo($(this).attr("id")),"001"):(MainBlur($("#"+AxFocusedFld)),AxOldValue="",MainFocus($j(this)),AxFldBlurFromSelect="♠♠"),isOnCLose=!1}else $(this).attr("id")==AxFocusedFld||""==AxFocusedFld||AxFldBlured==AxFocusedFld||$("#"+AxFocusedFld).hasClass("fldFromSelect")||$("#"+AxFocusedFld).hasClass("multiFldChk")||$("#"+AxFocusedFld).hasClass("gridHeaderSwitch")||$("#"+AxFocusedFld).hasClass("dvgrdchkboxnonedit")||$("#"+AxFocusedFld).hasClass("ckbGridStretchSwitch")?gridRowEditOnLoad&&IsGridField(GetFieldsName($(this).attr("id")))&&UpdateGridRowFlags($(this).attr("id"),GetFieldsDcNo($(this).attr("id")),"001"):(MainBlur($("#"+AxFocusedFld)),AxOldValue="",MainFocus($j(this)),AxFldBlurFromSelect="♠♠"),isOnCLose?isOnCLose&&null==$(this).val()&&!$(this).hasClass("multiFldChk")?select2IsFocused=!0:isOnCLose&&""!=$(this).val()&&null!=$(this).val()&&!$(this).hasClass("multiFldChk")&&(select2IsFocused=!1):""==$(this).val()||null==$(this).val()||$(this).hasClass("multiFldChk")?($("input.select2-search__field").val($(this).val()),select2IsOpened=!0,select2EventType="click"):(isSelectedValFocus=!0,select2IsFocused=!0),isOnCLose=!1;var l=void 0===$(this).attr("data-addoption")?"":$(this).attr("data-addoption"),a=void 0===$(this).attr("data-refresh")?"":$(this).attr("data-refresh"),s=$(this).attr("id"),r="";try{var i=GetFieldIndex(GetFieldsName(s));i>-1&&(r=FldIsAPI[i])}catch(C){r=""}var d="";if($(this).hasClass("multiFldChk")?($(".select2-results a.fsautorefresh").remove(),""==r&&(d+='<a class="btn btn-sm btn-icon btn-white btn-color-gray-500 btn-active-primary me-2 shadow-sm float-end" id="advSearch'+s+'" title="adv. search" data-ids='+s+'><span class="material-icons material-icons-style material-icons-3">search</span></a><input type=hidden id="pickIdVal_'+s+'" value="" />')):(void 0!==a&&""!=a&&"true"==a?d+='<a class="btn btn-sm btn-icon btn-white btn-color-gray-600 btn-active-primary me-2 shadow-sm ms-2 fsautorefresh" id="autorefresh'+s+'" title="Refresh" data-refresh='+s+'><span class="material-icons material-icons-style material-icons-3">refresh</span></a>':void 0!==a&&""!=a&&"false"==a&&(d+='<a class="btn btn-sm btn-icon btn-white btn-color-gray-600 btn-active-primary me-2 shadow-sm ms-2 disabled" id="autoleft'+s+'" title="Previous" data-fldname='+s+'><span class="material-icons material-icons-style material-icons-3">navigate_before</span></a><a class="btn btn-sm btn-icon btn-white btn-color-gray-500 btn-active-primary me-2 shadow-sm disabled" id="autoright'+s+'" title="Next" data-fldname='+s+'><span class="material-icons material-icons-style material-icons-3">navigate_next</span></a>'),""==r&&(d+='<a class="btn btn-sm btn-icon btn-white btn-color-gray-500 btn-active-primary me-2 shadow-sm float-end" id="advSearch'+s+'" title="adv. search" data-ids='+s+'><span class="material-icons material-icons-style material-icons-3">search</span></a><input type=hidden id="pickIdVal_'+s+'" value="" />'),d+='<a class="btn btn-sm btn-icon btn-white btn-color-gray-500 btn-active-primary me-2 shadow-sm float-end" id="copySelVal'+s+'" title="Copy Selected Value" data-ids='+s+'><span class="material-icons material-icons-style material-icons-3">copy</span></a>'),void 0!==l&&""!=l&&(d+='<a class="btn btn-sm btn-icon btn-primary btn-color-gray-600--- btn-active-primary--- me-2 shadow-sm float-end" id="addOption'+s+'" data-ids='+s+' title="Add Master Data"><span class="material-icons material-icons-style material-icons-3">add</span></a>'),$(".select2-results:not(:has(a))").append(d),fldNameAc=$(this).attr("id"),$(this).hasClass("multiFldChk")){var n,o=null===(n=$(this).data("select2"))||void 0===n?void 0:n.$dropdown;if(0==o.find(".select2-results").find(".msSelectAllOption").length){var c='<div class="msSelectAllOption form-check form-check-custom align-self-end px-5 d-none">\n                    <input type="checkbox" class="form-check-input msSelectAll" onchange="checkAllCheckBoxTokens(this, \''.concat(fldNameAc,'\')"/>\n                    <label for="SelectAll" class="ps-2 form-check-label form-label col-form-label pb-1 fw-boldest">\n                        Select All\n                    </label>\n                </div>');o.find(".select2-results").append(c)}var u=0;o.find(".select2-results").find(".select2-results__options li:not(.select2-results__option--disabled.loading-results)").each(function(e,t){$(t).hasClass("select2-results__option--selected")&&u++}),o.find(".select2-results").find(".select2-results__options li:not(.select2-results__option--disabled.loading-results)").length==u&&u>0?o.find(".select2-results").find(".msSelectAllOption > .msSelectAll").prop("checked",!0):o.find(".select2-results").find(".select2-results__options li:not(.select2-results__option--disabled.loading-results)").length!=u&&o.find(".select2-results").find(".msSelectAllOption > .msSelectAll").is(":checked")&&o.find(".select2-results").find(".msSelectAllOption > .msSelectAll").prop("checked",!1)}CangefldName!=fldNameAc&&(AutPageNo=1,rcount=0,CangefldName=fldNameAc),isNavigation||(AutPageNo=1),isNavigation=!1;try{if(null!=$("#"+fldNameAc).val()&&""!=$("#"+fldNameAc).val()){var f=GetFieldsName(fldNameAc);ShowTooltip(f,$("#"+fldNameAc))}}catch(C){}if(clickEvents(s),""==isDataStoreInLs&&checkDevOptDdlStoreLS(),"true"==isDataStoreInLs){var p=top.window.location.href.toLowerCase().substring("0",top.window.location.href.indexOf("/aspx/")),m=fldNameAc.substring(0,fldNameAc.lastIndexOf("F")-3);parentFldVal="",parentFldVal="undefined"!=typeof wsPerfEnabled&&wsPerfEnabled?ISBoundAutoCom(m,fldNameAc):ISBoundNew(fieldName,fldNameAc);var h=getDdlKeysWithPrefix("tstDDFVal♠"+transid+"♦"+m+"♦"+parentFldVal+"♦"+p+"♥");if(h.length>0){var F=localStorage[h[0]];if(!F)return;var A=(F=$.parseJSON(F)).pickdata[3].data,v=$.map(A,function(e){return e.i=e.i.replace(/\^\^dq/g,"&quot;"),{id:e.i,text:e.i,dep:e.d}}),g=$("#"+fldNameAc),N=g.val();g.empty(),$.each(v,function(e,t){g.append($("<option>",{value:t.id,text:t.text}))}),g.val(N)}}}).on("select2:close",function(e){isOnCLose=!1,isSelectedValFocus=!1,select2IsFocused=!0,select2EventType="",AxFldBlurFromSelect=""}).on("select2:closing",function(e){isOnCLose=!0,select2EventType=""}).on("select2:clear",function(e){isOnCLose=!0,select2EventType="";try{$(".select2-hidden-accessible").each(function(){$(this).data("select2")&&$(this).select2("close")})}catch(t){}})}function SetFieldParamList(e,t){try{if(""!=t){var l=e.substring(0,e.lastIndexOf("F")-3),a=$j.inArray(l,FldDListPFNames);a>-1?(FldDListPFNames[a]=l,FldDListPFNameVals[a]=t):(FldDListPFNames.push(l),FldDListPFNameVals.push(t))}}catch(s){}}function GetFieldParamList(e){var t="";try{var l=$j.inArray(e,FldDListPFNames);l>-1&&(t=FldDListPFNameVals[l])}catch(a){}return t}function checkNextSelExpFld(e,t){try{if("undefined"!=typeof AxpFillDepEnabled&&"true"==AxpFillDepEnabled)if(""!=AxpFillDepFieldsClient){if(-1==AxpFillDepFieldsClient.split(",").indexOf(e)){var l="";if(-1!=t&&(l=FldDependents[t].toString()),""!=l&&(i=l.split(",")),i!=undefined)for(var a=0;a<i.length;a++){var s=(d=i[a].toString()).substring(0,1),r=d.substring(1);if((n=GetFieldIndex(r))>-1&&"e"==s&&"select"==FMoe[n].toString().toLowerCase()){AxpFillDepFieldsClient=","+e,IsGridField(r)&&(""!=AxFldExpOnAddRow?AxFldExpOnAddRow=","+r:AxFldExpOnAddRow=r);break}}}}else{var i;l="";if(-1!=t&&(l=FldDependents[t].toString()),""!=l&&(i=l.split(",")),i!=undefined)for(a=0;a<i.length;a++){var d,n;s=(d=i[a].toString()).substring(0,1),r=d.substring(1);if((n=GetFieldIndex(r))>-1&&"e"==s&&"select"==FMoe[n].toString().toLowerCase()){AxpFillDepFieldsClient=e,IsGridField(r)&&(""!=AxFldExpOnAddRow?AxFldExpOnAddRow=","+r:AxFldExpOnAddRow=r);break}}}}catch(o){}}function clickEvents(e){$(document).off("click","#autorefresh"+e),$(document).on("click","#autorefresh"+e,function(e){if(refreshAC=!0,AutPageNo=1,rcount=0,CangefldName="",PageCount=0,isSelectedValFocus=!1,select2IsFocused=!1,select2IsOpened=!0,isRefreshClick=!0,select2EventType="click",void 0!==$(".select2-dropdown--below")&&$(".select2-dropdown--below").length>0){var t=$("#"+$(e.currentTarget).data("refresh"));t.hasClass("select2-hidden-accessible")&&t.select2("destroy"),t.empty(),createFormSelect(t),t.select2("open")}else $("#"+$(e.currentTarget).data("refresh")).select2("close"),$("#"+$(e.currentTarget).data("refresh")).select2("open")}),$(document).off("click","#autoleft"+e),$(document).on("click","#autoleft"+e,function(t){isNavigation=!0,pickarrow=!0,AutPageNo--,isSelectedValFocus=!1,$("#autoright"+e).prop("disabled",!1).removeClass("disabled"),1==AutPageNo&&$("#autoleft"+e).prop("disabled",!0).addClass("disabled"),select2IsFocused=!1,select2IsOpened=!0,isRefreshClick=!0,select2EventType="click",void 0!==$(".select2-dropdown--below")&&$(".select2-dropdown--below").length>0?$(".select2-dropdown--below").find(".select2-search__field").trigger($.Event("input",{which:13})):($("#"+$(t.currentTarget).data("refresh")).select2("close"),$("#"+$(t.currentTarget).data("refresh")).select2("open"))}),$(document).off("click","#autoright"+e),$(document).on("click","#autoright"+e,function(t){isNavigation=!0,pickarrow=!0,AutPageNo++,isSelectedValFocus=!1,$("#autoleft"+e).prop("disabled",!1).removeClass("disabled"),PageCount<=AutPageNo&&$("#autoright"+e).prop("disabled",!0).addClass("disabled"),select2IsFocused=!1,select2IsOpened=!0,isRefreshClick=!0,select2EventType="click",void 0!==$(".select2-dropdown--below")&&$(".select2-dropdown--below").length>0?$(".select2-dropdown--below").find(".select2-search__field").trigger($.Event("input",{which:13})):($("#"+$(t.currentTarget).data("refresh")).select2("close"),$("#"+$(t.currentTarget).data("refresh")).select2("open"))}),$(document).off("click","#advSearch"+e),$(document).on("click","#advSearch"+e,function(){$("#"+$(this).data("ids")).select2("close"),isSelectedValFocus=!1,SearchOpenNew($(this).data("ids"))}),$(document).off("click","#addOption"+e),$(document).on("click","#addOption"+e,function(){$("#"+$(this).data("ids")).select2("close");var e=$(this).data("ids"),t=$("#"+e).data("addoption"),l=e.substring(0,e.lastIndexOf("F")-3),a="tstruct.aspx?transid="+t.split("~")[0]+"&AxPop=true&AxRefSelect=true&AxRefSelectID="+l+"&AxSrcSelectID="+t.split("~")[1]+"&AxRefType="+t.split("~")[2];isSelectedValFocus=!1;var s=new BSModal("modalIdNewItem","","<iframe class='col-12 h-100' src='"+a+"'></iframe>",function(){},function(){});s.changeSize("fullscreen"),s.hideFooter(),s.hideHeader(),s.showFloatingClose()}),$(document).off("keydown","input.select2-search__field"),$(document).on("keydown","input.select2-search__field",function(e){if(isSelectedValFocus&&(isSelectedValFocus=!1),"9"==e.originalEvent.keyCode){var t=$(e.currentTarget).attr("aria-controls");void 0!==t&&(t=t.replace("select2-","").replace("-results",""),$("#"+t).select2("close"))}}),$(document).off("keypress","input.select2-search__field"),$(document).on("keypress","input.select2-search__field",function(e){isSelectedValFocus&&(isSelectedValFocus=!1)}),$(document).off("click","#copySelVal"+e),$(document).on("click","#copySelVal"+e,function(){try{null!=$("#"+$(this).data("ids")).val()?navigator.clipboard.writeText($("#"+$(this).data("ids")).val()):navigator.clipboard.writeText("")}catch(t){if("undefined"==typeof navigator.clipboard&&null!=$("#"+$(this).data("ids")).val()){var e=document.getElementById("tstddlCopyText");e.value=$("#"+$(this).data("ids")).val(),e.select(),document.execCommand("copy")}else"undefined"!=typeof navigator.clipboard&&navigator.clipboard.writeText("")}})}function GetAutoCompData(e,t,l,a){var s="";if(arrRefreshDcs.length>0)for(var r=0;r<arrRefreshDcs.length;r++){var i=arrRefreshDcs[r].split(":");s=i[1].replace("dc","")+","+i[0].replace("dc","")}t=CheckSpecialCharsInStr(t);var d=GetFieldsDcNo(e);AxActiveRowNo=parseInt(GetFieldsRowNo(e),10),AxActiveRowNo=GetDbRowNo(AxActiveRowNo,d);var n=AxActiveRowNo,o="";""!=AxActivePRow&&""!=AxActivePDc&&(o=AxActivePDc+"♠"+AxActivePRow);var c="";return IsParentField(e,d)&&(c=GetSubGridInfoForParent(d,AxActiveRowNo)),null!=t&&""!=t&&(l=1),l.toString()+"~"+a.toString()+"~"+d+"~"+n+"~"+o+"~"+c+"~"+s}function createFormMultiSelect(msfldId){var formSelect=$(msfldId),msData="",refreshMs=!1,fldNameMs="",isrefreshsave="",fieldName="",pageData="",parentFldVal="",igr=1,isOnCLose=!1;formSelect.select2({ajax:{url:"tstruct.aspx/GetMultiSelectValues",type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",delay:250,data:function(e){var t=$(this);if(!select2IsOpened||"undefined"!=typeof e.term&&""!=e.term)select2IsFocused?(select2EventType="open",termVal=""==e.term?undefined:e.term):"undefined"!=typeof e.term&&""!=e.term&&(termVal=e.term);else{if("true"==isAddRowWsCalled)return isAddRowWsCalled=t.attr("id"),select2EventType="tab",select2IsFocused=!0,void t.select2("close");termVal=""}return igr=1,fldNameMs=$(this).attr("id"),isrefreshsave=$(this).hasClass("isrefreshsave"),fieldName=fldNameMs.substring(0,fldNameMs.lastIndexOf("F")-3),pageData=GetMultiSelectPageData(fldNameMs,"",1,AutPageSize),JSON.stringify({tstDataId:tstDataId,FldName:fieldName,ChangedFields:ChangedFields,ChangedFieldDbRowNo:ChangedFieldDbRowNo,ChangedFieldValues:ChangedFieldValues,DeletedDCRows:DeletedDCRows,fldNameMs:fldNameMs,refreshMs:refreshMs,parentsFlds:parentFldVal,rfSave:isrefreshsave,pageData:pageData,isTstHtmlLs:resTstHtmlLS})},processResults:function processResults(data){select2EventType="open";var result=data.d.toString().replace(new RegExp("\\n","g"),"");if(""!=result&&result.split("♣*♣").length>1&&(tstDataId=result.split("♣*♣")[0],result=result.split("♣*♣")[1]),!CheckSessionTimeout(result)&&(result=result.toString().replace(new RegExp("\\t","g"),"&#9;"),resTstHtmlLS="",ChangedFields=new Array,ChangedFieldDbRowNo=new Array,ChangedFieldValues=new Array,DeletedDCRows=new Array,-1===result.toLowerCase().indexOf("access violation"))){var serResult=$.parseJSON(result);if(serResult.error)return void ExecErrorMsg(serResult.error,"autocomplete");if(msData=serResult.multiselectdata[3].data,0!=msData.length){var aSearch=[];if("undefined"!=typeof termVal&&""!=termVal&&null!=termVal&&""!=termVal.toLowerCase()?$(msData).each(function(e,t){t.mslist=t.mslist.replace(/\^\^dq/g,"&quot;"),t.mslist.toLowerCase().indexOf(termVal.toLowerCase())>=0&&aSearch.push(t)}):aSearch=msData,0!=aSearch.length){msData=_.sortBy(aSearch,"grouporder");var grdNo=0,mulResult="[",result=$.map(msData,function(e){0==grdNo?(grdNo=e.grouporder,mulResult+='{"id":"'+e.grouporder+'","text":"'+e.groupby+'","children":[{"id":"'+e.mslist+'","text":"'+e.mslist+'","selected":"'+e.selected+'"}'):grdNo==e.grouporder?(grdNo=e.grouporder,mulResult+=',{"id":"'+e.mslist+'","text":"'+e.mslist+'","selected":"'+e.selected+'"}'):grdNo!=e.grouporder&&(grdNo=e.grouporder,mulResult+=']},{"id":"'+e.grouporder+'","text":"'+e.groupby+'","children":[{"id":"'+e.mslist+'","text":"'+e.mslist+'", "selected":"'+e.selected+'"}')});return"["!=mulResult?mulResult+="]}]":"["==mulResult&&(mulResult=""),{results:$.parseJSON(mulResult)}}var cutMsg=eval(callParent("lcm[0]"));return{results:"",noResults:cutMsg}}var cutMsg=eval(callParent("lcm[0]"));return{results:"",noResults:cutMsg}}}},tags:"true",placeholder:"Search for a repository",minimumInputLength:0,selectionCssClass:":all:d-flex pe-10 ms-render",escapeMarkup:function(e){return e},templateResult:function(e,t){if(e.element)return e.text;var l;e.children&&(null===(l=$("#"+fldNameMs).data("select2"))||void 0===l||l.$dropdown.find("ul.select2-results__options:eq(0)").addClass("d-flex justify-content-between multiSelectGroup"));return e.text},closeOnSelect:!1,createTag:function(e){return null}}).on("select2:select",function(e){var t=$(this).val();if(void 0!==$(this).data("sep")){var l=$(this).data("sep");t=t.join(l)}var a=GetFieldsName(fldNameMs),s=$j.inArray(a,FNames);if(-1!=s&&void 0===$("#"+fldNameMs).attr("disabled")&&"True"!=FFieldReadOnly[s]&&"True"!=FFieldHidden[s]){var r=GetFieldsDcNo(fldNameMs),i=GetDbRowNo(GetFieldsRowNo(fldNameMs),r);$(this).attr("data-selected",t),UpdateFieldArray(fldNameMs,i,t,"parent","AutoComplete"),UpdateAllFieldValues(fldNameMs,t),setTimeout(function(){MainBlur($j("#"+fldNameMs))},0)}}).on("select2:unselect",function(e){var t=$(this).attr("id"),l=$(this).val();if(void 0!==$(this).data("sep")){var a=$(this).data("sep");l=l.join(a)}var s=GetFieldsDcNo(t),r=GetDbRowNo(GetFieldsRowNo(t),s);$(this).attr("data-selected",l),UpdateFieldArray(t,r,l,"parent","AutoComplete"),UpdateAllFieldValues(t,l),""==l&&(AxOldValue=" "),MainBlur($j("#"+t))}).on("select2:open",function(e){var t="scroll.select2";$(e.target).parents().off(t),$(window).off(t),select2IsFocused?(select2EventType="tab",""!=$(this).val()&&null!=$(this).val()&&($("input.select2-search__field").val($(this).val()),select2IsOpened=!0),$(this).attr("id")==AxFocusedFld||""==AxFocusedFld||$("#"+AxFocusedFld).hasClass("fldFromSelect")||$("#"+AxFocusedFld).hasClass("multiFldChk")||$("#"+AxFocusedFld).hasClass("gridHeaderSwitch")||$("#"+AxFocusedFld).hasClass("dvgrdchkboxnonedit")||$("#"+AxFocusedFld).hasClass("ckbGridStretchSwitch")?gridRowEditOnLoad&&IsGridField(GetFieldsName($(this).attr("id")))&&UpdateGridRowFlags($(this).attr("id"),GetFieldsDcNo($(this).attr("id")),"001"):(MainBlur($("#"+AxFocusedFld)),AxOldValue="",MainFocus($j(this))),isOnCLose=!1):($(this).attr("id")==AxFocusedFld||""==AxFocusedFld||$("#"+AxFocusedFld).hasClass("fldFromSelect")||$("#"+AxFocusedFld).hasClass("multiFldChk")||$("#"+AxFocusedFld).hasClass("gridHeaderSwitch")||$("#"+AxFocusedFld).hasClass("dvgrdchkboxnonedit")||$("#"+AxFocusedFld).hasClass("ckbGridStretchSwitch")?gridRowEditOnLoad&&IsGridField(GetFieldsName($(this).attr("id")))&&UpdateGridRowFlags($(this).attr("id"),GetFieldsDcNo($(this).attr("id")),"001"):(MainBlur($("#"+AxFocusedFld)),AxOldValue="",MainFocus($j(this))),isOnCLose||($("input.select2-search__field").val($(this).val()),select2IsOpened=!0,select2EventType="click"),isOnCLose=!1),$(".select2-results a.fsautorefresh").remove(),$(".select2-results a[id*=addOption]").remove(),$(".select2-results a[id^='copySelVal']").remove();var l=$(this).attr("id"),a='<a class="btn btn-sm btn-icon btn-white btn-color-gray-500 btn-active-primary me-2 shadow-sm float-end" id="advSearch'+l+'" title="adv. search" data-ids='+l+'><span class="material-icons material-icons-style material-icons-3">search</span></a><input type=hidden id="pickIdVal_'+l+'" value="" />';$(".select2-results:not(:has(a))").append(a),clickEvents(l)}).on("select2:close",function(e){isOnCLose=!1,select2IsFocused=!0,select2EventType=""}).on("select2:closing",function(e){isOnCLose=!0,select2EventType=""}).on("select2:clear",function(e){isOnCLose=!0,select2EventType="";try{$(".select2-hidden-accessible").each(function(){$(this).data("select2")&&$(this).select2("close")})}catch(t){}}),formSelect.parent().find(".ms-render .select2-selection__rendered").addClass("text-wrap text-break p-0")}function GetMultiSelectPageData(e,t,l,a){var s="";if(arrRefreshDcs.length>0)for(var r=0;r<arrRefreshDcs.length;r++){var i=arrRefreshDcs[r].split(":");s=i[1].replace("dc","")+","+i[0].replace("dc","")}t=CheckSpecialCharsInStr(t);var d=GetFieldsDcNo(e);AxActiveRowNo=parseInt(GetFieldsRowNo(e),10),AxActiveRowNo=GetDbRowNo(AxActiveRowNo,d);var n=AxActiveRowNo,o="";""!=AxActivePRow&&""!=AxActivePDc&&(o=AxActivePDc+"♠"+AxActivePRow);var c="";return IsParentField(e,d)&&(c=GetSubGridInfoForParent(d,AxActiveRowNo)),l.toString()+"~"+a.toString()+"~"+d+"~"+n+"~"+o+"~"+c+"~"+s}function AxGetCustSelectFldData(e){var t="",l=$("#"+e).hasClass("fastdll"),a=GetAutoCompData(e,"",1,1e3),s=e.substring(0,e.lastIndexOf("F")-3),r="";r="undefined"!=typeof wsPerfEnabled&&wsPerfEnabled?ISBoundAutoCom(s,e):ISBoundNew(s,e);var i=GetFieldIndex(s),d=FldIsAPI[i],n=FldDSqlParams[i],o=GetFieldParamList(s);return $.ajax({url:"tstruct.aspx/GetAutoCompleteData",type:"POST",cache:!1,async:!1,data:JSON.stringify({tstDataId:tstDataId,FldName:s,FltValue:"",ChangedFields:ChangedFields,ChangedFieldDbRowNo:ChangedFieldDbRowNo,ChangedFieldValues:ChangedFieldValues,DeletedDCRows:DeletedDCRows,pageData:a,fastdll:l,fldNameAc:e,refreshAC:!1,pickArrow:!1,parentsFlds:r,rfSave:!0,IsApiFld:d,tblSourceParams:"",isTstHtmlLs:resTstHtmlLS,ddlFldSqlParams:n,ddlSqlPNames:o}),dataType:"json",contentType:"application/json",success:function(e){try{var l=e.d.toString().replace(new RegExp("\\n","g"),"");if(""!=l&&l.split("♣*♣").length>1&&(tstDataId=l.split("♣*♣")[0],l=l.split("♣*♣")[1]),""!=l&&(l=l.split("*♠*")[0]),CheckSessionTimeout(l))return;if(l=l.toString().replace(new RegExp("\\t","g"),"&#9;"),resTstHtmlLS="",ChangedFields=new Array,ChangedFieldDbRowNo=new Array,ChangedFieldValues=new Array,DeletedDCRows=new Array,l.toLowerCase().includes("access violation")&&l.toLowerCase().includes("asbtstruct.dll"))AxWaitCursor(!1),ShowDimmer(!1),showAlertDialog("error","Access Violation");else{if(l.indexOf("♥")>-1){var a=l.split("♥")[1];SetFieldParamList(fldNameAc,a),l=l.split("♥")[0]}t=l}}catch(s){AxWaitCursor(!1),ShowDimmer(!1),showAlertDialog("error",s.message)}},error:function(e){AxWaitCursor(!1),ShowDimmer(!1),showAlertDialog("error",e)}}),t}function createFormSelectMultiChecklist(fld){var formSelect=$(fld),fldNameAc="",fieldName="",fastdll="",termVal="",depFldName="",isPickMinChar=!1,isOnCLose=!1,parentFldVal="",IsBindData=!1,mulSeparator=",",_thisSelVal="",isUnselect=!1;function SetSelectedItemCount(e){var t,l=$(e).val(),a=(l=_toConsumableArray(new Set(l))).length,s=null===(t=$(e).data("select2"))||void 0===t?void 0:t.$dropdown,r='<div class="dvMulSelectCount float-end px-2">\n                    <label for="Selecteditems" class="ps-2 form-label col-form-label pb-1">\n                        Selected Count: '.concat(a,"\n                    </label>\n                </div>");s.find(".select2-results").find(".dvMulSelectCount").remove(),s.find(".select2-results").find(".msSelectAllOption").length>0?s.find(".select2-results").find(".msSelectAllOption").before(r):s.find(".select2-results").append(r);var i=$(e).attr("id"),d=GetFieldsName(i);if("undefined"!=typeof AxHideSelectAll){var n=AxHideSelectAll.split("♦");if("false"==n[0].toLowerCase()){if(0==s.find(".select2-results").find(".msSelectAllOption").length){var o='<div class="msSelectAllOption form-check form-check-custom align-self-end px-5 d-none">\n                    <input type="checkbox" class="form-check-input msSelectAll" onchange="checkAllCheckBoxTokens(this, \''.concat(fldNameAc,'\')"/>\n                    <label for="SelectAll" class="ps-2 form-check-label form-label col-form-label pb-1 fw-boldest">\n                        Select All\n                    </label>\n                </div>');s.find(".select2-results").append(o)}}else if(n.length>1&&"false"==n[0].toLowerCase()&&""==n[1]){if(0==s.find(".select2-results").find(".msSelectAllOption").length){var c='<div class="msSelectAllOption form-check form-check-custom align-self-end px-5 d-none">\n                    <input type="checkbox" class="form-check-input msSelectAll" onchange="checkAllCheckBoxTokens(this, \''.concat(fldNameAc,'\')"/>\n                    <label for="SelectAll" class="ps-2 form-check-label form-label col-form-label pb-1 fw-boldest">\n                        Select All\n                    </label>\n                </div>');s.find(".select2-results").append(c)}}else if(n.length>1&&("true"!=n[0].toLowerCase()||"true"==n[0].toLowerCase()&&""!=n[1]&&n[1]!=d)&&0==s.find(".select2-results").find(".msSelectAllOption").length){var u='<div class="msSelectAllOption form-check form-check-custom align-self-end px-5 d-none">\n                    <input type="checkbox" class="form-check-input msSelectAll" onchange="checkAllCheckBoxTokens(this, \''.concat(fldNameAc,'\')"/>\n                    <label for="SelectAll" class="ps-2 form-check-label form-label col-form-label pb-1 fw-boldest">\n                        Select All\n                    </label>\n                </div>');s.find(".select2-results").append(u)}}else if(0==s.find(".select2-results").find(".msSelectAllOption").length){var f='<div class="msSelectAllOption form-check form-check-custom align-self-end px-5 d-none">\n                    <input type="checkbox" class="form-check-input msSelectAll" onchange="checkAllCheckBoxTokens(this, \''.concat(fldNameAc,'\')"/>\n                    <label for="SelectAll" class="ps-2 form-check-label form-label col-form-label pb-1 fw-boldest">\n                        Select All\n                    </label>\n                </div>');s.find(".select2-results").append(f)}var p=0;s.find(".select2-results").find(".select2-results__options li:not(.select2-results__option--disabled.loading-results)").each(function(e,t){$(t).hasClass("select2-results__option--selected")&&p++}),s.find(".select2-results").find(".select2-results__options li:not(.select2-results__option--disabled.loading-results)").length==p&&p>0?s.find(".select2-results").find(".msSelectAllOption > .msSelectAll").prop("checked",!0):s.find(".select2-results").find(".select2-results__options li:not(.select2-results__option--disabled.loading-results)").length!=p&&s.find(".select2-results").find(".msSelectAllOption > .msSelectAll").is(":checked")&&s.find(".select2-results").find(".msSelectAllOption > .msSelectAll").prop("checked",!1)}formSelect.select2({ajax:{url:"tstruct.aspx/GetAutoCompleteData",type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",delay:250,data:function(e){if(!select2IsOpened||"undefined"!=typeof e.term&&""!=e.term?select2IsFocused?(select2EventType="open",void 0===(termVal=e.term)&&null!=$(this).val()&&(termVal="")):"undefined"!=typeof e.term&&""!=e.term&&(termVal=e.term):termVal="",void 0!==$(this).data("separator")&&(mulSeparator=$(this).data("separator")),1==(fastdll=!!$(this).hasClass("multiFldChk")||$(this).hasClass("fastdll"))||0==fastdll&&""==termVal||0==fastdll&&(void 0===termVal||termVal.length>1)){isPickMinChar=!1;var t=$(this).hasClass("isrefreshsave"),l=GetAutoCompData(fldNameAc,termVal,AutPageNo,AutPageSize),a=fldNameAc.substring(0,fldNameAc.lastIndexOf("F")-3);parentFldVal="",parentFldVal="undefined"!=typeof wsPerfEnabled&&wsPerfEnabled?ISBoundAutoCom(a,fldNameAc):ISBoundNew(a,fldNameAc);var s=GetFieldIndex(a),r=FldIsAPI[s],i=FldDSqlParams[s],d=GetFieldParamList(a);if(!(FldListParents.length>0&&FldListParents.indexOf(a+"♦"+fldNameAc+"♦"+parentFldVal)>-1&&""==termVal)||isRefreshClick||$(this).hasClass("multiFldChk"))return IsBindData=!1,isRefreshClick=!1,JSON.stringify({tstDataId:tstDataId,FldName:a,FltValue:termVal,ChangedFields:ChangedFields,ChangedFieldDbRowNo:ChangedFieldDbRowNo,ChangedFieldValues:ChangedFieldValues,DeletedDCRows:DeletedDCRows,pageData:l,fastdll:fastdll,fldNameAc:fldNameAc,refreshAC:refreshAC,pickArrow:pickarrow,parentsFlds:parentFldVal,rfSave:t,IsApiFld:r,tblSourceParams:"",isTstHtmlLs:resTstHtmlLS,ddlFldSqlParams:i,ddlSqlPNames:d});IsBindData=!0}else IsBindData=!1,rcount=0,isPickMinChar=!0},processResults:function processResults(data){IsBindData=!1,select2EventType="open",refreshAC=!1;try{var result=data.d.toString().replace(new RegExp("\\n","g"),"");if(""!=result&&(result.split("♣*♣").length>1&&(tstDataId=result.split("♣*♣")[0],result=result.split("♣*♣")[1]),result.split("*♠*").length>1?(serverprocesstime=result.split("*♠*")[1],requestProcess_logtime=result.split("*♠*")[2],result=result.split("*♠*")[0],WireElapsTime(serverprocesstime,requestProcess_logtime,!0)):UpdateExceptionMessageInET("Error : "+result)),CheckSessionTimeout(result))return;if(result=result.toString().replace(new RegExp("\\t","g"),"&#9;"),resTstHtmlLS="",ChangedFields=new Array,ChangedFieldDbRowNo=new Array,ChangedFieldValues=new Array,DeletedDCRows=new Array,!result.toLowerCase().includes("access violation")||!result.toLowerCase().includes("asbtstruct.dll")){if(result.indexOf("♥")>-1){var _fldParamNames=result.split("♥")[1];SetFieldParamList(fldNameAc,_fldParamNames),result=result.split("♥")[0]}var serResult=$.parseJSON(result);if(datasss=serResult,serResult.error)return void ExecErrorMsg(serResult.error,"autocomplete");var rcountNew=serResult.pickdata[0].rcount;if(depFldName=serResult.pickdata[2].dfname,0!=rcountNew&&(rcount=parseInt(rcountNew)),rcount=rcount<fetchRCount?rcount:fetchRCount,PageCount=Math.ceil(rcount/AutPageSize),0==PageCount&&(PageCount=1),countPerPage=rcount,1==AutPageNo?1==PageCount?($("#autoleft"+fldNameAc).prop("disabled",!0).addClass("disabled"),$("#autoright"+fldNameAc).prop("disabled",!0).addClass("disabled")):$("#autoright"+fldNameAc).prop("disabled",!1).removeClass("disabled"):AutPageNo>1&&PageCount<=AutPageNo&&$("#autoright"+fldNameAc).prop("disabled",!0).addClass("disabled"),dtAssoc=serResult.pickdata[3].data,dtAssoc!=undefined&&0!=dtAssoc.length){if(!$("#"+fldNameAc).hasClass("multiFldChk")){var _fieldName=fldNameAc.substring(0,fldNameAc.lastIndexOf("F")-3);if(FldListParents.indexOf(_fieldName+"♦"+fldNameAc+"♦"+parentFldVal)>-1||FldListParents.some(function(e){return e.startsWith(_fieldName+"♦")})){var _tIdn=FldListParents.indexOf(_fieldName+"♦"+fldNameAc+"♦"+parentFldVal)>-1?FldListParents.indexOf(_fieldName+"♦"+fldNameAc+"♦"+parentFldVal):FldListParents.findIndex(function(e){return e.startsWith(_fieldName+"♦")},_fieldName+"♦");FldListParents[_tIdn]=_fieldName+"♦"+fldNameAc+"♦"+parentFldVal,FldListData[_tIdn]=serResult}else FldListParents.push(_fieldName+"♦"+fldNameAc+"♦"+parentFldVal),FldListData.push(serResult)}if($(this.$element).hasClass("multiFldChk")&&$(".msSelectAllOption").removeClass("d-none"),fastdll){var aSearch=[];if($(dtAssoc).each(function(e,t){t.i=t.i.replace(/\^\^dq/g,"&quot;"),t.i.toLowerCase().indexOf(termVal.toLowerCase())>=0&&aSearch.push(t)}),$("#"+fldNameAc).data("rowcount",aSearch.length),0!=aSearch.length){var result=$.map(aSearch,function(e){return e.i=e.i.replace(/\^\^dq/g,"&quot;"),{id:e.i,text:e.i,dep:e.d}});return"true"==AxRulesDefFilter&&(result=AxFilterDropDownResult(fldNameAc,result)),searchResult=result,{results:result}}if($(this.$element).hasClass("multiFldChk"))$(".msSelectAllOption").addClass("d-none");else{var _fieldName4=fldNameAc.substring(0,fldNameAc.lastIndexOf("F")-3);if(FldListParents.indexOf(_fieldName4+"♦"+fldNameAc+"♦"+parentFldVal)>-1||FldListParents.some(function(e){return e.startsWith(_fieldName4+"♦")})){var _tIdn5=FldListParents.indexOf(_fieldName4+"♦"+fldNameAc+"♦"+parentFldVal)>-1?FldListParents.indexOf(_fieldName4+"♦"+fldNameAc+"♦"+parentFldVal):FldListParents.findIndex(function(e){return e.startsWith(_fieldName4+"♦")},_fieldName4+"♦");FldListParents.splice(_tIdn5,1),FldListData.splice(_tIdn5,1)}}var cutMsg=eval(callParent("lcm[0]"));return{results:"",noResults:cutMsg}}var result=$.map(dtAssoc,function(e){return e.i=e.i.replace(/\^\^dq/g,"&quot;"),{id:e.i,text:e.i,dep:e.d}});return"true"==AxRulesDefFilter&&(result=AxFilterDropDownResult(fldNameAc,result)),searchResult=result,{results:result}}if($(this.$element).hasClass("multiFldChk"))$(".msSelectAllOption").addClass("d-none");else{var _fieldName5=fldNameAc.substring(0,fldNameAc.lastIndexOf("F")-3);if(FldListParents.indexOf(_fieldName5+"♦"+fldNameAc+"♦"+parentFldVal)>-1||FldListParents.some(function(e){return e.startsWith(_fieldName5+"♦")})){var _tIdn6=FldListParents.indexOf(_fieldName5+"♦"+fldNameAc+"♦"+parentFldVal)>-1?FldListParents.indexOf(_fieldName5+"♦"+fldNameAc+"♦"+parentFldVal):FldListParents.findIndex(function(e){return e.startsWith(_fieldName5+"♦")},_fieldName5+"♦");FldListParents.splice(_tIdn6,1),FldListData.splice(_tIdn6,1)}}var cutMsg=eval(callParent("lcm[0]"));return{results:"",noResults:cutMsg}}AxWaitCursor(!1),ShowDimmer(!1),$("#reloaddiv").show(),$("#dvlayout").hide()}catch(exception){-1!=exception.message.toLowerCase().indexOf("access violation")&&(AxWaitCursor(!1),ShowDimmer(!1),$("#reloaddiv").show(),$("#dvlayout").hide())}},error:function(e){if(IsBindData){var t=fldNameAc.substring(0,fldNameAc.lastIndexOf("F")-3);if(FldListParents.length>0&&FldListParents.indexOf(t+"♦"+fldNameAc+"♦"+parentFldVal)>-1){var l=FldListParents.indexOf(t+"♦"+fldNameAc+"♦"+parentFldVal);depFldName=FldListData[l].pickdata[2].dfname;var a=FldListData[l].pickdata[3].data,s=$.map(a,function(e){return e.i=e.i.replace(/\^\^dq/g,"&quot;"),{id:e.i,text:e.i,dep:e.d}});$(".select2-results__options li:eq(0)").remove(),console.clear(),$("#"+fldNameAc).select2("data",s,!0),$("#"+fldNameAc).select2("updateResults")}}}},placeholder:"Search for a repository",minimumInputLength:0,selectionCssClass:":all:d-flex pe-10 ms-render",escapeMarkup:function(e){return e},multiple:!0,closeOnSelect:!1,tokenSeparators:[mulSeparator],language:{errorLoading:function(){return isPickMinChar?"Required to search minimum 2 characters":"Start type characters for searching data.."}}}).on("select2:select",function(event){var depList=event.params.data.dep,fldAcValue=$(this).val();if(void 0!==$(this).data("separator")){var separator=$(this).data("separator");fldAcValue=fldAcValue.join(separator)}refreshAC=!1,isGrdEditDirty=!0,dtAssoc=[];var cutMsg=eval(callParent("lcm[0]")),fName=GetFieldsName(fldNameAc),fldIndex=$j.inArray(fName,FNames);if(-1!=fldIndex&&void 0===$("#"+fldNameAc).attr("disabled")&&"True"!=FFieldReadOnly[fldIndex]&&"True"!=FFieldHidden[fldIndex]){var rcID=GetFieldsRowFrameNo(fldNameAc),acFrNo=GetFieldsDcNo(fldNameAc),rowNum=GetDbRowNo(GetFieldsRowNo(fldNameAc),acFrNo),fldRowNo=GetFieldsRowNo(fldNameAc);if(IsDcGrid(acFrNo)&&isGrdEditDirty&&UpdateFieldArray(axpIsRowValid+acFrNo+fldRowNo+"F"+acFrNo,GetDbRowNo(fldRowNo,acFrNo),"","parent","AddRow"),UpdateFieldArray(fldNameAc,rowNum,fldAcValue,"parent","AutoComplete"),UpdateAllFieldValues(fldNameAc,fldAcValue),SetSelectedItemCount(this),depList!=undefined&&null!=depList&&depList!=cutMsg&&""!=depFldName)try{var depText=depList.split("^"),dfCount=0;$.each(depText,function(e,t){var l=depFldName.split("^")[dfCount],a=t;dfCount++,rcID=rcID.substring(0,rcID.lastIndexOf("F")+1)+GetDcNo(l),""!=a&&(a=a.replace(new RegExp("<br>","g"),"\n")),$("#"+l+rcID).val(a);var s=$("#"+l+rcID).data("type")||$("#"+l+rcID).prop("type");void 0!==s&&"checkbox"==s&&$("#"+l+rcID).hasClass("custInpChk")&&(""==a?$("#"+l+rcID).prop("checked",!1):""!=a&&"f"==a.toLowerCase()?$("#"+l+rcID).prop("checked",!1):""!=a&&"t"==a.toLowerCase()&&$("#"+l+rcID).prop("checked",!0));var r=$j.inArray(l,FNames);"Numeric"==GetFieldType(l,r)&&$("#"+l+rcID).data("attr",a),a!=undefined&&(UpdateFieldArray(l+rcID,rowNum,a,"parent","AutoComplete"),UpdateAllFieldValues(l+rcID,a))})}catch(Ex){}checkNextSelExpFld(fName,fldIndex),setTimeout(function(){AxOldValue=""},0)}}).on("select2:unselect",function(e){var t=$(this).attr("id"),l=$(this).val();if(void 0!==$(this).data("separator")){var a=$(this).data("separator");l=l.join(a);GetFieldsRowFrameNo(t);var s=GetFieldsDcNo(t),r=GetDbRowNo(GetFieldsRowNo(t),s);UpdateFieldArray(t,r,l,"parent","AutoComplete"),UpdateAllFieldValues(t,l)}""==l?AxOldValue=" ":$(this).hasClass("multiFldChk")||(AxOldValue=l),SetSelectedItemCount(this),isUnselect=!0}).on("select2:open",function(e){var t="scroll.select2";$(e.target).parents().off(t),$(window).off(t),isPickMinChar=!1,select2IsFocused?(select2EventType="tab",""!=$(this).val()&&null!=$(this).val()&&($("input.select2-search__field").val($(this).val()),select2IsOpened=!0,isSelectedValFocus=!0),$(this).attr("id")==AxFocusedFld||""==AxFocusedFld||$("#"+AxFocusedFld).hasClass("fldFromSelect")||$("#"+AxFocusedFld).hasClass("multiFldChk")||$("#"+AxFocusedFld).hasClass("gridHeaderSwitch")||$("#"+AxFocusedFld).hasClass("dvgrdchkboxnonedit")||$("#"+AxFocusedFld).hasClass("ckbGridStretchSwitch")?gridRowEditOnLoad&&IsGridField(GetFieldsName($(this).attr("id")))&&UpdateGridRowFlags($(this).attr("id"),GetFieldsDcNo($(this).attr("id")),"001"):(MainBlur($("#"+AxFocusedFld)),AxOldValue="",MainFocus($j(this))),isOnCLose=!1):($(this).attr("id")==AxFocusedFld||""==AxFocusedFld||$("#"+AxFocusedFld).hasClass("fldFromSelect")||$("#"+AxFocusedFld).hasClass("multiFldChk")||$("#"+AxFocusedFld).hasClass("gridHeaderSwitch")||$("#"+AxFocusedFld).hasClass("dvgrdchkboxnonedit")||$("#"+AxFocusedFld).hasClass("ckbGridStretchSwitch")?gridRowEditOnLoad&&IsGridField(GetFieldsName($(this).attr("id")))&&UpdateGridRowFlags($(this).attr("id"),GetFieldsDcNo($(this).attr("id")),"001"):(MainBlur($("#"+AxFocusedFld)),AxOldValue="",MainFocus($j(this))),isOnCLose||($("input.select2-search__field").val($(this).val()),select2IsOpened=!0,select2EventType="click"),isOnCLose=!1);var l=void 0===$(this).attr("data-addoption")?"":$(this).attr("data-addoption"),a=(void 0===$(this).attr("data-refresh")||$(this).attr("data-refresh"),$(this).attr("id")),s=$(this).val().length,r="";if($(".select2-results a.fsautorefresh").remove(),r+='<a class="btn btn-sm btn-icon btn-white btn-color-gray-500 btn-active-primary me-2 shadow-sm float-end" id="advSearch'+a+'" title="adv. search" data-ids='+a+'><span class="material-icons material-icons-style material-icons-3">search</span></a><input type=hidden id="pickIdVal_'+a+'" value="" />',void 0!==l&&""!=l&&(r+='<a class="btn btn-sm btn-icon btn-primary btn-color-gray-600--- btn-active-primary--- me-2 shadow-sm float-end" id="addOption'+a+'" data-ids='+a+' title="Add Master Data"><span class="material-icons material-icons-style material-icons-3">add</span></a>'),$(".select2-results:not(:has(a))").append(r),fldNameAc=$(this).attr("id"),$(this).hasClass("multiFldChk")){var i,d=null===(i=$(this).data("select2"))||void 0===i?void 0:i.$dropdown,n='<div class="dvMulSelectCount float-end px-2">\n                    <label for="Selecteditems" class="ps-2 form-label col-form-label pb-1">\n                        Selected Count: '.concat(s,"\n                    </label>\n                </div>");d.find(".select2-results").find(".dvMulSelectCount").remove(),d.find(".select2-results").find(".msSelectAllOption").length>0?d.find(".select2-results").find(".msSelectAllOption").before(n):d.find(".select2-results").append(n);var o=GetFieldsName(fldNameAc);if("undefined"!=typeof AxHideSelectAll){var c=AxHideSelectAll.split("♦");if("false"==c[0].toLowerCase()){if(0==d.find(".select2-results").find(".msSelectAllOption").length){var u='<div class="msSelectAllOption form-check form-check-custom align-self-end px-5 d-none">\n                    <input type="checkbox" class="form-check-input msSelectAll" onchange="checkAllCheckBoxTokens(this, \''.concat(fldNameAc,'\')"/>\n                    <label for="SelectAll" class="ps-2 form-check-label form-label col-form-label pb-1 fw-boldest">\n                        Select All\n                    </label>\n                </div>');d.find(".select2-results").append(u)}}else if(c.length>1&&"false"==c[0].toLowerCase()&&""==c[1]){if(0==d.find(".select2-results").find(".msSelectAllOption").length){var f='<div class="msSelectAllOption form-check form-check-custom align-self-end px-5 d-none">\n                    <input type="checkbox" class="form-check-input msSelectAll" onchange="checkAllCheckBoxTokens(this, \''.concat(fldNameAc,'\')"/>\n                    <label for="SelectAll" class="ps-2 form-check-label form-label col-form-label pb-1 fw-boldest">\n                        Select All\n                    </label>\n                </div>');d.find(".select2-results").append(f)}}else if(c.length>1&&("true"!=c[0].toLowerCase()||"true"==c[0].toLowerCase()&&""!=c[1]&&c[1]!=o)&&0==d.find(".select2-results").find(".msSelectAllOption").length){var p='<div class="msSelectAllOption form-check form-check-custom align-self-end px-5 d-none">\n                    <input type="checkbox" class="form-check-input msSelectAll" onchange="checkAllCheckBoxTokens(this, \''.concat(fldNameAc,'\')"/>\n                    <label for="SelectAll" class="ps-2 form-check-label form-label col-form-label pb-1 fw-boldest">\n                        Select All\n                    </label>\n                </div>');d.find(".select2-results").append(p)}}else if(0==d.find(".select2-results").find(".msSelectAllOption").length){var m='<div class="msSelectAllOption form-check form-check-custom align-self-end px-5 d-none">\n                    <input type="checkbox" class="form-check-input msSelectAll" onchange="checkAllCheckBoxTokens(this, \''.concat(fldNameAc,'\')"/>\n                    <label for="SelectAll" class="ps-2 form-check-label form-label col-form-label pb-1 fw-boldest">\n                        Select All\n                    </label>\n                </div>');d.find(".select2-results").append(m)}var h=0;d.find(".select2-results").find(".select2-results__options li:not(.select2-results__option--disabled.loading-results)").each(function(e,t){$(t).hasClass("select2-results__option--selected")&&h++}),d.find(".select2-results").find(".select2-results__options li:not(.select2-results__option--disabled.loading-results)").length==h&&h>0?d.find(".select2-results").find(".msSelectAllOption > .msSelectAll").prop("checked",!0):d.find(".select2-results").find(".select2-results__options li:not(.select2-results__option--disabled.loading-results)").length!=h&&d.find(".select2-results").find(".msSelectAllOption > .msSelectAll").is(":checked")&&d.find(".select2-results").find(".msSelectAllOption > .msSelectAll").prop("checked",!1);var F=$("#"+a).val(),A=$("#"+a).data("separator")||",";_thisSelVal=F.join(A)}CangefldName!=fldNameAc&&(AutPageNo=1,rcount=0,CangefldName=fldNameAc),isNavigation||(AutPageNo=1),isNavigation=!1,clickEvents(a)}).on("select2:close",function(e){isOnCLose=!1,isSelectedValFocus=!1,select2IsFocused=!0,select2EventType="",$(this).trigger("blur")}).on("select2:closing",function(e){isOnCLose=!0,select2EventType=""}).on("select2:clear",function(e){isOnCLose=!0,select2EventType="";try{$(".select2-hidden-accessible").each(function(){$(this).data("select2")&&$(this).select2("close")})}catch(t){}}).on("blur",function(){var e=$(this).attr("id"),t=$(this).val(),l=$(this).data("separator")||",",a=t.join(l);(_thisSelVal!=a||void 0!==isUnselect&&isUnselect)&&setTimeout(function(){void 0!==isUnselect&&isUnselect?(isUnselect=!1,AxOldValue=" "):AxOldValue="",MainBlur($j("#"+e))},0)}),formSelect.parent().find(".ms-render .select2-selection__rendered").addClass("text-wrap text-break p-0"),$(document).on("keydown",function(e){"Tab"!==e.key&&"Escape"!==e.key||$(".select2-container--open").length&&formSelect.select2("close")})}function checkDevOptDdlStoreLS(){if("undefined"!=typeof tstConfigurations&&tstConfigurations.config!==undefined&&tstConfigurations.config.length>0){var e,t=[];try{tstConfigurations.config.forEach(function(e){var l={};$.map(e,function(e,t){l[t.toLowerCase()]=e}),t.push(l)})}catch(a){}var l=null===(e=t.find(function(e){var t;return"store dropdown values in localstorage"===(null===(t=e.props)||void 0===t?void 0:t.trim().toLowerCase())}))||void 0===e?void 0:e.propsval;isDataStoreInLs=void 0!==l&&""!=l&&"true"==l.toLowerCase()?"true":"false"}else isDataStoreInLs="false"}function getDdlKeysWithPrefix(e){return Object.keys(localStorage).filter(function(t){return t.startsWith(e)})}function setDropdownDatafromLS(e,t){var l=top.window.location.href.toLowerCase().substring("0",top.window.location.href.indexOf("/aspx/"));try{var a=getDdlKeysWithPrefix(e+"♦"+l+"♥");if(a.length>0){var s,r=_createForOfIteratorHelper(a);try{for(r.s();!(s=r.n()).done;){var i=s.value;localStorage.removeItem(i)}}catch(h){r.e(h)}finally{r.f()}}var d=(new Date).getTime();localStorage.setItem(e+"♦"+l+"♥"+d,t)}catch(F){if(F.message.indexOf("exceeded the quota")>-1){var n=JSON.stringify(t),o=new Blob([n]).size,c=getDdlKeysWithPrefix("tstDDFVal♠");if(c.length>0){var u,f=_createForOfIteratorHelper(c.filter(function(e){return e.split("♥")[1]}).sort(function(e,t){return parseInt(e.split("♥")[1],10)-parseInt(t.split("♥")[1],10)}));try{for(f.s();!(u=f.n()).done;){var p=u.value;if(localStorage.removeItem(p),10485760-getUsedDdlLocalStorageSpace()>o)break}}catch(h){f.e(h)}finally{f.f()}try{var m=(new Date).getTime();localStorage.setItem(e+"♦"+l+"♥"+m,t)}catch(F){}}}}}function getUsedDdlLocalStorageSpace(){var e=0;for(var t in localStorage)localStorage.hasOwnProperty(t)&&(e+=2*(t.length+localStorage[t].length));return e}$(document).on("paste","span.select2",function(e){var t,l=$(e.target).closest(".select2").prev();if($(l).hasClass("multiFldChk")){e.preventDefault();var a=l.attr("id"),s=new Array;null===(t=$(l).data("select2"))||void 0===t||t.$results.children().each(function(e,t){s.push($(this).text())}),void 0!==l.data("separator")&&(l.data("select2").options.options.tokenSeparators[0]=l.data("separator"));var r=(e.originalEvent||e).clipboardData.getData("text/plain");$.each(r.split(new RegExp(l.data("select2").options.options.tokenSeparators.map(function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}).join("|"))),function(e,t){t&&$.inArray(t,s)>-1&&(!l.val()||l.val()&&-1==l.val().indexOf(""+t))&&l.append(function(e,t){return $("<option></option>").attr("value",e).attr("selected","selected").text(e)[0]}(t))}),l.trigger("change"),setTimeout(function(){MainBlur($j("#"+a))},0)}});