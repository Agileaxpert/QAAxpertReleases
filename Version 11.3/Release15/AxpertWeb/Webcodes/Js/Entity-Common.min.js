/*https://web.agile-labs.com/minZIP/*//*version=3.9.1*/function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var dtCulture=eval(callParent("glCulture")),advFilterDtCulture="en-us"==dtCulture?"MM/DD/YYYY":"DD/MM/YYYY",EntityCommon=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"isAppManager",value:function(){var t,e,n,a,o,r;return"block"==(null===(t=window.top.$.axpertUI)||void 0===t?void 0:null===(e=t.options)||void 0===e?void 0:null===(n=e.axpertUserSettings)||void 0===n?void 0:null===(a=n.settings)||void 0===a?void 0:null===(o=a.axUserOptions)||void 0===o?void 0:null===(r=o.configurationStudio)||void 0===r?void 0:r.display)}},{key:"getInitials",value:function(t){var e="",n=t.split(" ");return 1===n.length?e=1==n[0].length?n[0].charAt(0):n[0].charAt(0)+n[0].charAt(1):2===n.length?e=n[0].charAt(0)+n[1].charAt(0):n.length>=3&&(e=n[0].charAt(0)+n[1].charAt(0)),e.toUpperCase()}},{key:"isEmpty",value:function(t){return""==t}},{key:"isNull",value:function(t){return null==t}},{key:"isNullOrEmpty",value:function(t){return null==t||""==t}},{key:"inValid",value:function(t){return null==t||void 0===t||""==t}},{key:"isValid",value:function(t){return!this.inValid(t)}},{key:"isUndefined",value:function(t){return void 0===t}},{key:"setAnalyticsDataWS",value:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(){},n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:function(){},a=function(t){$.ajax({url:top.window.location.href.toLowerCase().substring(0,top.window.location.href.toLowerCase().indexOf("/aspx/"))+"/aspx/Analytics.aspx/SetAnalyticsDataWS",type:"POST",cache:!1,async:!0,dataType:"json",data:JSON.stringify(t),contentType:"application/json",success:function(t){console.log("Response from SetAnalyticsDataWS:",t),e&&"function"==typeof e&&e(t.d||t)},error:function(t){console.error("Error in SetAnalyticsDataWS:",t),n&&"function"==typeof n&&n(t)}})};this.isAppManager()&&t.confirmNeeded?($("#confirmationModal").appendTo("body").css("z-index",1100).modal("show"),$("#btnAllUsers").on("click",function(){t.allUsers=!0,a(t),$("#confirmationModal").modal("hide")}),$("#btnJustMyself").on("click",function(){t.allUsers=!1,a(t),$("#confirmationModal").modal("hide")})):a(t)}},{key:"getAnalyticsDataWS",value:function(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(){},n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:function(){};$.ajax({url:top.window.location.href.toLowerCase().substring(0,top.window.location.href.toLowerCase().indexOf("/aspx/"))+"/aspx/Analytics.aspx/GetAnalyticsDataWS",type:"POST",cache:!1,async:!0,dataType:"json",data:JSON.stringify(t),contentType:"application/json",success:function(t){e&&"function"==typeof e&&e(t.d||t)},error:function(t){n&&"function"==typeof n&&n(t)}})}},{key:"getEntityEditableFlag",value:function(t){var e=!1;return this.callAPI("../aspx/Entity.aspx/GetEntityEditableFlagWS",t,!1,function(t){t.success?t.response.indexOf(':\\"T\\"')>-1&&(e=!0):e=!1}),e}},{key:"getDatesBasedonSelection",value:function(t){var e={from:"",to:""},n="en-us"==dtCulture?"MM/DD/YYYY":"DD/MM/YYYY";switch(t){case"customOption":break;case"todayOption":var a=new Date;e.from=e.to=moment(a).format(n);break;case"yesterdayOption":(a=new Date).setDate(a.getDate()-1),e.from=e.to=moment(a).format(n);break;case"tomorrowOption":(a=new Date).setDate(a.getDate()+1),e.from=e.to=moment(a).format(n);break;case"this_weekOption":a=this.getFirstDayOfWeek(new Date);e.from=moment(a).format(n),a.setDate(a.getDate()+6),e.to=moment(a).format(n);break;case"last_weekOption":(a=this.getFirstDayOfWeek(new Date)).setDate(a.getDate()-7),e.from=moment(a).format(n),a.setDate(a.getDate()+6),e.to=moment(a).format(n);break;case"next_weekOption":(a=this.getFirstDayOfWeek(new Date)).setDate(a.getDate()+7),e.from=moment(a).format(n),a.setDate(a.getDate()+6),e.to=moment(a).format(n);break;case"this_monthOption":(a=this.getFirstDayOfWeek(new Date)).setDate(1),e.from=moment(a).format(n),a.setMonth(a.getMonth()+1),a.setDate(0),e.to=moment(a).format(n);break;case"last_monthOption":(a=this.getFirstDayOfWeek(new Date)).setDate(1),a.setMonth(a.getMonth()-1),e.from=moment(a).format(n),a.setMonth(a.getMonth()+1),a.setDate(0),e.to=moment(a).format(n);break;case"next_monthOption":(a=this.getFirstDayOfWeek(new Date)).setDate(1),a.setMonth(a.getMonth()+1),e.from=moment(a).format(n),a.setMonth(a.getMonth()+1),a.setDate(0),e.to=moment(a).format(n);break;case"this_quarterOption":a=new Date;var o=Math.floor((a.getMonth()+3)/3);a.setDate(1),a.setMonth(3*o-3),e.from=moment(a).format(n),a.setMonth(a.getMonth()+3),a.setDate(0),e.to=moment(a).format(n);break;case"last_quarterOption":a=new Date;0==(o=Math.floor((a.getMonth()+3)/3)-1)&&(o=4,a.setFullYear(a.getFullYear()-1)),a.setDate(1),a.setMonth(3*o-3),e.from=moment(a).format(n),a.setMonth(a.getMonth()+3),a.setDate(0),e.to=moment(a).format(n);break;case"next_quarterOption":a=new Date;5==(o=Math.floor((a.getMonth()+3)/3)+1)&&(o=1,a.setFullYear(a.getFullYear()+1)),a.setDate(1),a.setMonth(3*o-3),e.from=moment(a).format(n),a.setMonth(a.getMonth()+3),a.setDate(0),e.to=moment(a).format(n);break;case"this_yearOption":(a=new Date).setDate(1),a.setMonth(0),e.from=moment(a).format(n),a.setFullYear(a.getFullYear()+1),a.setMonth(0),a.setDate(0),e.to=moment(a).format(n);break;case"last_yearOption":(a=new Date).setFullYear(a.getFullYear()-1),a.setDate(1),a.setMonth(0),e.from=moment(a).format(n),a.setFullYear(a.getFullYear()+1),a.setMonth(0),a.setDate(0),e.to=moment(a).format(n);break;case"next_yearOption":(a=new Date).setFullYear(a.getFullYear()+1),a.setDate(1),a.setMonth(0),e.from=moment(a).format(n),a.setFullYear(a.getFullYear()+1),a.setMonth(0),a.setDate(0),e.to=moment(a).format(n)}return e}},{key:"getFirstDayOfWeek",value:function(t){var e=(t=new Date(t)).getDay(),n=t.getDate()-e+(0==e?-6:1);return new Date(t.setDate(n))}},{key:"callAPI",value:function(t,e,n,a){var o=this,r=new XMLHttpRequest;r.open("POST",t,n),r.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.isAxpertFlutter&&(r.setRequestHeader("Authorization","Bearer ".concat(armToken)),e.armSessionId=armSessionId),r.onreadystatechange=function(){4==this.readyState&&(200==this.status?a({success:!0,response:this.responseText}):(o.catchError(this.responseText),a({success:!1,response:this.responseText})))},r.send(JSON.stringify(e))}},{key:"catchError",value:function(t){showAlertDialog("error",t)}},{key:"showSuccess",value:function(t){showAlertDialog("success",t)}},{key:"dataConvert",value:function(t,e){if("AXPERT"==e)try{if("undefined"!=typeof(t=JSON.parse(t.d)).result[0].result.row)return t.result[0].result.row;if("undefined"!=typeof t.result[0].result)return t.result[0].result}catch(n){ShowDimmer(!1),this.catchError(n.message)}else if("ARM"==e)try{if(this.isAxpertFlutter||(t=JSON.parse(t.d)),t.result&&t.result.success){if(!this.isUndefined(t.result.data))return t.result.data}else this.isUndefined(t.result.message)||this.catchError(t.result.message)}catch(n){ShowDimmer(!1),this.catchError(n.message)}return t}},{key:"generateFldId",value:function(){return"fid".concat(Date.now()).concat(Math.floor(9e4*Math.random())+1e4)}}]),t}();function AxGetGlobalVar(){var t="";return $.ajax({url:top.window.location.href.toLowerCase().substring("0",top.window.location.href.indexOf("/aspx/")+6)+"axinterface.aspx/GetGlobalVar",type:"POST",cache:!1,async:!1,dataType:"json",contentType:"application/json",success:function(e){t=""!=e.d?JSON.parse(e.d):""},error:function(e){t=e}}),t}